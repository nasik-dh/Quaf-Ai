// Quiz Data
        const subjectQuestions = {
            "1": [
                {
                    question: "ഖുർആൻ അവതരിച്ചത് എത്ര കാലം കൊണ്ട്?",
                    options: ["20", "22", "23"],
                    correctAnswer: 2
                },
                {
                    question: "ഖുർആനിൽ ആകെ എത്ര സൂറത്തുകൾ ഉണ്ട്?",
                    options: ["111", "114", "117"],
                    correctAnswer: 1
                },
                {
                    question: "ഖുർആൻ അവതരണത്തിന്റെ മുമ്പ്  അത് രേഖപ്പെടുത്തിയിരുന്നത് എവിടെ?",
                    options: ["ആകാശത്ത്", "ലൗഹുൽ മഹ്ഫൂളിൽ", "ഭൂമിയിൽ"],
                    correctAnswer: 1
                },
                {
                    question: "ഖുർആനിൽ ആദ്യമായി അവതരിച്ച ആയത്ത് ഏത് സൂറത്തിലാണ്?",
                    options: ["അലഖ്", "മുദസിർ", "ബഖറ"],
                    correctAnswer: 0
                },
                {
                    question: "ഒരു സൂറത്തായി ഒന്നിച്ച് പൂര്‍ണ്ണമായി  അവതരിച്ച സൂറത്ത് ?",
                    options: ["മുസ്സമിൽ", "കൗസർ", "മുദസിർ"],
                    correctAnswer: 2
                },
                {
                    question: "ഖുർആനിലെ ഏറ്റവും മഹത്വമുള്ള സൂറത്ത്?",
                    options: ["മുൽക്", "ഫാത്തിഹ", "യാസീൻ"],
                    correctAnswer: 1
                },
                {
                    question: "ഖുർആനിലെ ഏറ്റവും ചെറിയ സൂറത്ത്?",
                    options: ["അസ്ർ", "കൗസർ", "ഇഖ്ലാസ്"],
                    correctAnswer: 1
                },
                {
                    question: "എല്ലാ ആയത്തിലും അല്ലാഹു എന്ന പദമുള്ള സൂറത്ത്?",
                    options: ["ഹഷ്‌ർ", "ഫാത്തിഹ", "മുജാദല"],
                    correctAnswer: 2
                },
                {
                    question: "ഖുര്‍ആനില്‍ പേരെടുത്ത് പറഞ്ഞ ഒരേ ഒരു സ്വഹാബി?",
                    options: ["സൈദ് (റ)", "അബ്ബാസ് (റ)", "അബൂബക്കർ (റ)"],
                    correctAnswer: 0
                },
                {
                    question: "ഖുർആൻ അവതരിച്ച രാത്രിയുടെ പേര്?",
                    options: ["ലൈലത്തുൽ ബറാഅ", "ലൈലത്തുൽ ഷഅബാൻ", "ലൈലത്തുൽ ഖദ്ർ"],
                    correctAnswer: 2
                },
                {
                    question: "ഖുർആനിൽ എത്ര നബിമാരുടെ പേര് പരാമര്‍ശിച്ചിട്ടുണ്ട്?",
                    options: ["33", "15", "25"],
                    correctAnswer: 2
                },
                {
                    question: "ഖുർആനിൽ ഏറ്റവുമധികം തവണ പേര് പറയപ്പെട്ട നബി?",
                    options: ["ഇബ്രാഹീം (അ)", "മൂസ(അ)", "സുലൈമാൻ(അ)"],
                    correctAnswer: 1
                },
                {
                    question: "നരകത്തിന് എത്ര വാതിലുകളുണ്ടെന്നാണ് ഖുര്‍ആനിലെ പരാമര്‍ശം?",
                    options: ["7", "11", "3"],
                    correctAnswer: 0
                },
                {
                    question: "ഖുർആനിന്റെ മണവാട്ടി എന്നറിയപ്പെടുന്ന സൂറത്ത്?",
                    options: ["റഹ്‌മാൻ", "വാഖിഅ", "മുൽക്"],
                    correctAnswer: 0
                },
                {
                    question: "ഖുർആനിന്റെ ഹൃദയം എന്നറിയപ്പെടുന്ന സൂറത്ത്?",
                    options: ["ഇഖ്ലാസ്", "യാസീൻ", "കഹ്‌ഫ്"],
                    correctAnswer: 1
                },
                {
                    question: "ഖുർആൻ പേരെടുത്തു പറഞ്ഞ ഏക സ്ത്രീ?",
                    options: ["മർയം", "ആസിയ", "മാഷിത"],
                    correctAnswer: 0
                },
                {
                    question: "ഖുർആൻ പരാമർശിച്ച റൂഹുൽ ആമീൻ എന്ന മലക്ക് ?",
                    options: ["ജിബ്‌രീൽ", "ഇസ്രാഫീൽ", "അസ്റാഈൽ"],
                    correctAnswer: 0
                },
                {
                    question: "രണ്ട് ബിസ്മിയുള്ള സൂറത്ത്?",
                    options: ["റഹ്‌മാൻ", "ഫാത്തിർ", "നംൽ"],
                    correctAnswer: 2
                },
                {
                    question: "അബാബീൽ പക്ഷികളെ പരാമർശിച്ച സൂറത്ത്?",
                    options: ["ഫീൽ", "ഖുറൈശ്", "മാഊൻ"],
                    correctAnswer: 0
                },
                {
                    question: "ഇബ്രാഹിം (അ) ന്റെ കാലത്ത് ജീവിച്ച മറ്റൊരു നബി?",
                    options: ["ഹാറൂൻ", "ലൂഥ്", "ആർമിയാഅ്"],
                    correctAnswer: 1
                }
            ],
            "2": [
                {
                    question: "ഖുർആൻ കഴിഞ്ഞാൽ ഏറ്റവും ശ്രേഷ്ഠതയുള്ള കിതാബ്?",
                    options: ["സ്വഹീഹ് ബുഖാരി", "സ്വഹീഹ് മുസ്‌ലിം", "തിർമുദി"],
                    correctAnswer: 0
                },
                {
                    question: "അല്ലാഹു മനുഷ്യന്റെ ഏത് ഭാഗത്തേക്കാണ് നോക്കുന്നത്?",
                    options: ["جسد", "جمال", "قلب"],
                    correctAnswer: 2
                },
                {
                    question: "കൊല്ലുന്നവനും കൊല്ലപ്പെടുന്നവനും നരകത്തിലാണ് (കൊല്ലപ്പെടുന്നവൻ എന്ത് കൊണ്ട് നരകത്തിൽ പ്രവേശിക്കുന്നു)",
                    options: ["അവൻ അക്രമിയാണ്", "അവൻ ദൈവ നിഷേധിയാണ്", "അവൻ തന്റെ കൂട്ടുകാരന്റെ വധത്തിൽ ആഗ്രഹമുള്ളവനാണ്"],
                    correctAnswer: 2
                },
                {
                    question: "അല്ലാഹു തൗബ സ്വീകരിക്കാത്ത സമയം?",
                    options: ["അല്ലാഹുവിങ്കൽ കള്ളൻ എന്ന് എഴുതപ്പെട്ടാൽ", "സൂര്യൻ പടിഞ്ഞാറ് നിന്ന് ഉദിച്ചാൽ", "ഈസാനബി (അ) ഇറങ്ങി വന്നാൽ"],
                    correctAnswer: 1
                },
                {
                    question: "(സിദ്ഖ്) മനുഷ്യനെ എവിടേക്ക് നയിക്കും?",
                    options: ["സന്മാർഗം", "സ്വർഗം", "ഗുണം"],
                    correctAnswer: 2
                },
                {
                    question: "ബനൂ ഇസ്റാഈല്യരിലെ ആദ്യ ഫിത്ന ആരിലായിരുന്നു?",
                    options: ["സമ്പന്നൻ", "പെണ്ണ്", "ആണ്"],
                    correctAnswer: 1
                },
                {
                    question: "പക്ഷികൾക്ക് ഭക്ഷണം നൽകുന്നത് പോലെ അല്ലാഹു ഭക്ഷണം നൽകും ആർക്ക്?",
                    options: ["അല്ലാഹുവിനെ ഭരമേല്പിച്ചവർക്ക്", "കുറഞ്ഞത് കൊണ്ട് തൃപ്തിപ്പെടുന്നവർക്ക്", "പ്രഭാതത്തിലും പ്രദോഷത്തിലും മസ്ജിദിൽ പോകുന്നവർക്ക്"],
                    correctAnswer: 0
                },
                {
                    question: "ഉമ്മുസലമ (റ) യുടെ യഥാർത്ഥ പേര്?",
                    options: ["ഹിന്ദ് ബിൻത് അബി ഉത്ബ", "ഹിന്ദ് ബിൻത് അബി ഉമയ്യ", "ഹിന്ദ് ബിൻത് അബി സലമ"],
                    correctAnswer: 1
                },
                {
                    question: "ആര് ആരോട് പറഞ്ഞതാണ് افلا احب ان اكون عبدا شكورا ?",
                    options: ["നബി (സ) ഉമ്മുസലമ (റ)യോട്", "നബി (സ) ആയിഷാ (റ) യോട്", "നബി (സ) അബൂഹുറയ്റ(റ)നോട്"],
                    correctAnswer: 1
                },
                {
                    question: "ഈമാനിന്ന് എത്ര ശാഖകളുണ്ട്?",
                    options: ["70", "60", "50"],
                    correctAnswer: 0
                },
                {
                    question: "അല്ലാഹു അർശിന്റെ തണലിട്ട് കൊടുക്കുന്ന വിഭാഗങ്ങൾ എത്ര?",
                    options: ["10", "7", "5"],
                    correctAnswer: 1
                },
                {
                    question: "ഒരു കാര്യം ചെയ്താൽ നിങ്ങൾ പരസ്പരം സ്നേഹമുള്ളവരാകും. ആ കാര്യം ഏത്?",
                    options: ["സ്വദഖ അധികരിപ്പിക്കുക", "രഹസ്യങ്ങളെ പരസ്യപ്പെടുത്താതിരുന്നാൽ", "സലാം പറയലിനെ വ്യാപിപ്പിക്കുക"],
                    correctAnswer: 2
                },
                {
                    question: "الموجبتان ?",
                    options: ["സ്വർഗവും നരകവും നിർബന്ധമാക്കുന്ന കാര്യം", "നോമ്പും നിസ്കാരവും", "സ്വദഖയും സകാത്തും"],
                    correctAnswer: 0
                },
                {
                    question: "ഈ ഹദീസ് നബി (സ) പറഞ്ഞ സന്ദർഭം ഏത് لايموتن أحدكم إلا وهويحسن الظن بالله عز وجل ?",
                    options: ["വഫാതാകുന്നതിന് മൂന്ന് ദിവസം മുമ്പ്", "വഫാത്തിന്റെ സമയത്ത്", "പനി വന്ന സമയത്ത്"],
                    correctAnswer: 0
                },
                {
                    question: "നബി (സ) പറഞ്ഞു. നിങ്ങളിൽ ഏറ്റവും ഉത്തമർ?",
                    options: ["ഹൃദയം പള്ളികളുമായി ബന്ധപ്പെട്ട വ്യക്തികൾ", "വെള്ള വസ്ത്രം ധരിക്കുന്നവർ", "ഭാര്യമാരോട് നല്ല നിലയിൽ വർത്തിക്കുന്നവർ"],
                    correctAnswer: 2
                },
                {
                    question: "നബി (സ) പറഞ്ഞു. രണ്ടനുഗ്രഹങ്ങൾ ഉപയോഗപ്പെടുത്തുന്നതിൽ അധിക പേരും പരാജിതരാണ്.രണ്ടനുഗ്രഹങ്ങൾ ഏതെല്ലാം?",
                    options: ["المال والبنون", "الصحة والفراغ", "الصلاة والصوم"],
                    correctAnswer: 1
                },
                {
                    question: "വസ്ത്രങ്ങളിൽ ഏറ്റവും ഉത്തമമായ വസ്ത്രം?",
                    options: ["പച്ച നിറത്തിലുള്ള വസ്ത്രം", "വെള്ള നിറത്തിലുള്ളവസ്ത്രം", "പെരുന്നാൾ വസ്ത്രം"],
                    correctAnswer: 1
                },
                {
                    question: "മക്കം ഫത്ഹിന്റെ ദിവസം ആരുടെ തലയിലും താടിയിലുമാണ് നിറം പൂശാൻ കല്പിച്ചത്?",
                    options: ["ابو قحافة", "أبي أمية", "ابو عمر"],
                    correctAnswer: 0
                },
                {
                    question: "മനുഷ്യരെ കൂടുതലായി നരകത്തിലാക്കുന്ന അവയവം?",
                    options: ["عين", "يد", "فرج"],
                    correctAnswer: 2
                },
                {
                    question: "യഥാർത്ഥ ഐശ്വര്യം ഏത്?",
                    options: ["ശാരീരിക ഐശ്വര്യം", "സാമ്പത്തിക ഐശ്വര്യം", "മാനസിക ഐശ്വര്യം"],
                    correctAnswer: 2
                }
            ],
            "3": [
                {
                    question: "ജുമുഅയുടെ രാവും പകലും _______ ഓതണം?",
                    options: ["യാസീൻ", "കഹ്‌ഫ്", "റഹ്‌മാൻ"],
                    correctAnswer: 1
                },
                {
                    question: "രാത്രി അല്പം ഇറങ്ങിയതിനു ശേഷം എഴുനേറ്റു നമസ്കരിക്കുമ്പോൾ ഖിയാമുലൈലിന്_____________ എന്ന് പറയുന്നു?",
                    options: ["തഹജ്ജുദ്", "ളുഹാ", "തറാവീഹ്"],
                    correctAnswer: 0
                },
                {
                    question: "വിത്ർ എന്ന പതത്തിന്റെ അർഥം ________ ?",
                    options: ["ഇരട്ട", "ഒറ്റ", "പതിവ്"],
                    correctAnswer: 1
                },
                {
                    question: "ഫർള് നമസ്കാരങ്ങളുടെ മുമ്പും ശേഷവും ചെയ്യുന്ന സുന്നത്തുനമസ്കാരങ്ങൾ __________ എന്ന് പറയുന്നു?",
                    options: ["വിത്ർ", "തഹിയ്യത്", "റവാതിബ്"],
                    correctAnswer: 2
                },
                {
                    question: "وارحمه = അർഥം എന്താണ് ?",
                    options: ["ഇദേഹത്തോട് നീ കരുണ കാണിക്കേണമേ", "ങ്ങങ്ങൾക്കൊരു മുന്ഗാമിയെ തെരേണമേ", "ഇദേഹത്തതിന് പ്രവേശന സ്ഥലം നീ വിശാലമാക്കി തരേണമെ"],
                    correctAnswer: 0
                },
                {
                    question: "ജുമുഅ നമസ്കാരം ആർക്കൊക്കെയാണ് നിർബന്ധം?",
                    options: ["പുരുഷന്മാർ", "സ്വതന്ത്ര പുരുഷന്മാർ", "കുട്ടികൾ"],
                    correctAnswer: 1
                },
                {
                    question: "മയ്യിത്ത നമസ്കാരങ്ങൾക് എത്ര ഫർളുകളുണ്ട്?",
                    options: ["8", "6", "4"],
                    correctAnswer: 0
                },
                {
                    question: "നമസ്കാരത്തിൽ ഇളവുള്ളത് ആർക്കൊക്കെ?",
                    options: ["യാത്രക്കാർ", "രോഗികൾ", "യാത്രക്കാർ,രോഗികൾ"],
                    correctAnswer: 0
                },
                {
                    question: "ഹിജ്റ വര്ഷം എത്രാമത്തെ മാസമാണ് റമദാൻ?",
                    options: ["8", "9", "10"],
                    correctAnswer: 1
                },
                {
                    question: "നമസ്കാരം ബാതിലാവുന്ന കാര്യം ചൂസ് ചെയുക?",
                    options: ["നമസ്കാരത്തിന് ശർത്തുകളിലേതെങ്കിലുമൊന്ന് വേണെമെങ്കിൽ പാലിച്ചാൽ", "ഖുർആൻ,ദിക്ർ,ദുആ എന്നിവയെല്ലാത്ത മറ്റു വാക്കുകൾ ഉച്ചരിച്ചാൽ", "നമസ്കാരത്തിനിടയിൽ ആ നമസ്കാരം നിർത്തുകയാണ് എന്ന് കരുതിയില്ലെങ്കിൽ നമസ്കാരം ബാതിലാവും."],
                    correctAnswer: 1
                },
                {
                    question: "വുളൂഇൽ മുഖം കഴുകലിന്റെ വിധി?",
                    options: ["സുന്നത്", "ഫർള്", "ജാഇസ്"],
                    correctAnswer: 1
                },
                {
                    question: "മുന്നിൽ __________ അവർക്കു പിന്നിൽ ________ ഏറ്റവും പിന്നിൽ _________?",
                    options: ["പുരുഷന്മാർ,കുട്ടികൾ,സ്ത്രീകൾ", "പുരുഷന്മാർ,സ്ത്രീകൾ,കുട്ടികൾ", "പുരുഷന്മാർ,പെൺകുട്ടികൾ,സ്ത്രീകൾ"],
                    correctAnswer: 0
                },
                {
                    question: "ജമാഅത് നമസ്കാരങ്ങൾ ശെരിയാവുന്നതിനുള്ള നിബന്ധനകൾ എത്ര?",
                    options: ["5", "7", "12"],
                    correctAnswer: 1
                },
                {
                    question: "നമസ്കാരം ബാതിലാവുന്ന കാര്യങ്ങൾ എത്ര?",
                    options: ["8", "7", "6"],
                    correctAnswer: 2
                },
                {
                    question: "ഇവിടെ കൊടുത്തതിൽ ഏതാണ് സുന്നത്ത്?",
                    options: ["ളുഹർ നമസ്കരിക്കൽ", "നോമ്പ് തുറക്കൽ", "ഖിയാമുലൈൽ ഒറ്റ റകഅത്ത ആയി നിർത്തുക"],
                    correctAnswer: 2
                },
                {
                    question: "ഒരാൾ വജ്ജഹ്തു ഓതാൻ മറന്നു ബിസ്മി ഓതിയാൽ വീണ്ടും വജ്ജഹ്തു ഓതുന്നതിന്റെ വിധി?",
                    options: ["ജാഇസ്", "കറാഹത്", "ഹറാം"],
                    correctAnswer: 2
                },
                {
                    question: "صلاه الاستسقاء ?",
                    options: ["ഗ്രഹണനമസ്കാരം", "നന്മയെ തേടുന്ന നമസ്കാരം", "മഴക്കുവേണ്ടിയുള്ള നമസ്കാരം"],
                    correctAnswer: 2
                },
                {
                    question: "ജുമുഅക്ക് മുമ്പ് റവാതിബ് ഉണ്ടോ?",
                    options: ["ഇല്ല", "ഉണ്ട്", "നിർബന്ധം ഇല്ല"],
                    correctAnswer: 0
                },
                {
                    question: "ഖുതുബയുടെ നിർബന്ധ ഘടകങ്ങൾ എത്ര?",
                    options: ["9", "7", "5"],
                    correctAnswer: 2
                },
                {
                    question: "നമസ്കരിക്കാൻ പാടില്ലാത്ത സമയങ്ങൾ എത്ര?",
                    options: ["5", "4", "3"],
                    correctAnswer: 1
                }
            ],
            "4": [
                {
                    question: "ഇബ്രാഹിം (അ) ന്റെ സ്വദേശം?",
                    options: ["ഇറാഖ്", "ഇറാൻ", "ഫലസ്തീൻ"],
                    correctAnswer: 0
                },
                {
                    question: "ഉറുമ്പിനോട് സംസാരിച്ച പ്രവാചകൻ?",
                    options: ["ദാവൂദ്", "സുലൈമാൻ", "ഹാറൂൻ"],
                    correctAnswer: 1
                },
                {
                    question: "ഉമ്മുൽ ഖുറാ പട്ടണം ഏത്?",
                    options: ["മക്ക", "മദീന", "ജെറുസലേം"],
                    correctAnswer: 0
                },
                {
                    question: "യഹൂദികൾ ദൈവ പുത്രനായി കണ്ടിരുന്നത് ആരെ?",
                    options: ["ദാനിയാൽ", "ഷംവീൽ", "ഉസൈർ"],
                    correctAnswer: 2
                },
                {
                    question: "അബു ജഹൽ ന്റെ യഥാർത്ഥ പേര്?",
                    options: ["അംറ് ബിൻ അസിം", "അംറ് ബിൻ ഖുതമാ", "അംറ് ബിൻ ഹിഷാം"],
                    correctAnswer: 2
                },
                {
                    question: "നൂഹ് നബിയുടെ പ്രബോധന കാലം?",
                    options: ["670", "950", "786"],
                    correctAnswer: 1
                },
                {
                    question: "നീനവ സമുദായത്തിലേക്ക് അയക്കപ്പെട്ട പ്രവാചകൻ?",
                    options: ["യഹ്‌യ", "യൂനുസ്", "ദുൽകിഫ് ലി"],
                    correctAnswer: 1
                },
                {
                    question: "സമൂദ് സമുദായത്തിലേക്ക് നിയോഗിക്കപ്പെട്ട പ്രവാചകൻ?",
                    options: ["സ്വാലിഹ്", "ഹൂദ്", "ലൂഥ്"],
                    correctAnswer: 0
                },
                {
                    question: "മദ് യനിലെ പ്രവാചകൻ?",
                    options: ["ആർമിയാഅ", "ഷുഹൈബ്", "യൂശഅ"],
                    correctAnswer: 1
                },
                {
                    question: "ഫിർഔനെ മുക്കിയ കടൽ?",
                    options: ["കാസ്പിയൻ", "കരിങ്കടൽ", "ചെങ്കടൽ"],
                    correctAnswer: 2
                },
                {
                    question: "മജൂസികൾ ആര്?",
                    options: ["തീ ആരാധകർ", "കല്ല് ആരാധകർ", "സൂര്യ ആരാധകർ"],
                    correctAnswer: 0
                },
                {
                    question: "ഇസ്ലാമിൽ ഒന്നാമതായി നിർമ്മിക്കപ്പെട്ട പള്ളി?",
                    options: ["മസ്ജിദുൽ അഖ്സ", "മസ്ജിദുൽ ഹറാം", "മസ്ജിദുൽ ഖുബ"],
                    correctAnswer: 2
                },
                {
                    question: "തബൂഖ് യുദ്ധത്തെ കുറിച്ച് പറയുന്ന സൂറത്ത്?",
                    options: ["ഫാത്തിർ", "തൗബ", "ഫുസിലത്"],
                    correctAnswer: 1
                },
                {
                    question: "പടയങ്കിയിൽ പരിഷ്കാരം വരുത്തിയ പ്രവാചകൻ?",
                    options: ["സുലൈമാൻ", "ദാവൂദ്", "ദുൽഖർനൈൻ"],
                    correctAnswer: 1
                },
                {
                    question: "ഇബ്രാഹിം നബി ഇറാഖിൽ നിന്ന് എവിടേക്കാണ് ഹിജ്‌റ പോയത്?",
                    options: ["യസ്രിബ്", "കൂഫ", "ശാം"],
                    correctAnswer: 0
                },
                {
                    question: "അഹ്‌സാബ് യുദ്ധത്തിന്റെ മറ്റൊരു പേര്?",
                    options: ["ബദ്ർ", "ഉഹ്ദ്", "ഖന്തഖ്"],
                    correctAnswer: 2
                },
                {
                    question: "അബുൽ ബശർ എന്ന് അപരനാമം ഉള്ള പ്രവാചകൻ?",
                    options: ["നൂഹ്", "ആദം", "ഇദ് രീസ്"],
                    correctAnswer: 1
                },
                {
                    question: "യഅഖൂബ് നബിയുടെ സന്താനങ്ങൾ?",
                    options: ["14", "12", "16"],
                    correctAnswer: 1
                },
                {
                    question: "മൂസ നബിയുടെ പിതാവിന്റെ പേര്?",
                    options: ["ആസർ", "ഇമ്രാൻ", "മൽക്കാൻ"],
                    correctAnswer: 1
                },
                {
                    question: "അബ്രഹത് ഏത് രാജ്യത്തിന്റെ ഗവർണർ ആയിരുന്നു?",
                    options: ["സിറിയ", "ഇറാഖ്", "യമൻ"],
                    correctAnswer: 2
                }
            ],
            
            // 5. Nahv
            "5": [
                {
                    question: "اختر الصحيح من فعل المضارع",
                    options: ["قال", "بكى", "يرى"],
                    correctAnswer: 2
                },
                {
                    question: "اختر الصحيح من الاسم",
                    options: ["يرموق", "مرض", "بات"],
                    correctAnswer: 0
                },
                {
                    question: "اختر المبتدأ من الجملة 'البستان جميل' ",
                    options: ["البستان", "جميل", "البستان جميل"],
                    correctAnswer: 0
                },
                {
                    question: "اختر الفاعل من الجملة ' ضرب الأستاد زيدا' ",
                    options: ["ضرب", "الأستاد", "زيد"],
                    correctAnswer: 1
                },
                {
                    question: "اختر المفعول من الجملة 'شتم الرجل الطفل' ",
                    options: ["الطفل", "شتم", "الرجل"],
                    correctAnswer: 0
                },
                {
                    question: "اختر اداة الصحيحة من اخت كان",
                    options: ["ليت", "لعل", "أصبح"],
                    correctAnswer: 2
                },
                {
                    question: "اختر اداة الصحيحة من اخت إنّ",
                    options: ["بات", "صار", "لكن"],
                    correctAnswer: 2
                },
                {
                    question: "'ذهب السارق' هل هذه الجملة مفيدة أو غير مفيدة",
                    options: ["نعم", "لا", "غير"],
                    correctAnswer: 1
                },
                {
                    question: "اختر عبارة الصحيحة",
                    options: ["النعت لا يتبع المنعوت", "يرفع اسم إنّ", "ينصب خبر كان"],
                    correctAnswer: 2
                },
                {
                    question: "هل هذه الجملة صحيحة ام لا ' كان زيداً عالمٌ ' ",
                    options: ["نعم", "لا", "غير"],
                    correctAnswer: 1
                },
                {
                    question: "هل هذه الجملة صحيحة ام لا 'زيدٌ عاقلٌ ' ",
                    options: ["نعم", "لا", "غير"],
                    correctAnswer: 0
                },
                {
                    question: "في اي جملة يشتمل فيها حرف الجر",
                    options: ["رجل عاقل", "متى الساعة", "نظرت الى القمر"],
                    correctAnswer: 2
                },
                {
                    question: "هل هذه الجملة صحيحة ام لا 'زيدٌ في البيتَ ' ",
                    options: ["نعم", "لا", "غير"],
                    correctAnswer: 1
                },
                {
                    question: "وفق بحرف الجر الصحيح ' ذهب التاجر السوق' ",
                    options: ["في", "ب", "إلى"],
                    correctAnswer: 2
                },
                {
                    question: "وفق بحرف الجر الصحيح ' ركبتُ السيارة ' ",
                    options: ["في", "من", "على"],
                    correctAnswer: 2
                },
                {
                    question: "وفق بأداة إنّ الصحيح ' السكر مرّ' ",
                    options: ["ليت", "كأنّ", "لعل"],
                    correctAnswer: 0
                },
                {
                    question: "وفق بأداة إنّ الصحيحة 'طلعت الشمس ..... المطر شديد' ",
                    options: ["لعل", "لكن", "كأن"],
                    correctAnswer: 1
                },
                {
                    question: "لم ولا ناهية وإن",
                    options: ["حروف الرفع", "حروف النصب", "حروف الجزم"],
                    correctAnswer: 2
                },
                {
                    question: "أن، لن، إذن، كي",
                    options: ["حروف النصب", "حروف الرفع", "حروف الجزم"],
                    correctAnswer: 0
                },
                {
                    question: "هل هذه الجملة الصحيحة ام لا 'لن يدرسَ ا' ",
                    options: ["لا", "نعم", "غير"],
                    correctAnswer: 1
                }
            ],
            
            // 6. Swarf
            "6": [
                {
                    question: "الأفعال كم اقسام",
                    options: ["5", "3", "4"],
                    correctAnswer: 2
                },
                {
                    question: "الماضي كم اقسام",
                    options: ["4", "12", "2"],
                    correctAnswer: 2
                },
                {
                    question: "المعروف كم اوجه",
                    options: ["20", "14", "12"],
                    correctAnswer: 1
                },
                {
                    question: "صيغة وحدان حكاية نفس متكلم از اثبات فعل ماضي معروف ضمير درو أنا",
                    options: ["أفعل", "ما فعلتُ", "فعلتُ"],
                    correctAnswer: 2
                },
                {
                    question: "صيغة تثنية مذكر عائب از اثبات فعل ماضي مجهول ضمير درو هما",
                    options: ["فُعلتا", "فُعلا", "ما فُعلا"],
                    correctAnswer: 1
                },
                {
                    question: "صيفة وحدان مؤنث عائب از اثبات فعل مستقبل معروف ضمير درو هي",
                    options: ["تفعل", "تفعلين", "لا تفعلان"],
                    correctAnswer: 0
                },
                {
                    question: "اختر الضمير الصحيح  ' ما فعلتُ' ",
                    options: ["نحن", "انت", "انا"],
                    correctAnswer: 2
                },
                {
                    question: "اختر الضمير الصحيح ' ما فُعلتْ ' ",
                    options: ["انتِ", "انا", "هي"],
                    correctAnswer: 2
                },
                {
                    question: "اختر الضمير الصحيح ' تفعلين ' ",
                    options: ["هي", "انتِ", "انتم"],
                    correctAnswer: 1
                },
                {
                    question: "اختر الضمير الصحيح ' لا تفعلنَ ' ",
                    options: ["أنتن", "هن", "هم"],
                    correctAnswer: 0
                },
                {
                    question: "اختر الضمير الصحيح ' لم أفعلْ' ",
                    options: ["أنا", "هو", "أنتَ"],
                    correctAnswer: 0
                },
                {
                    question: "صيغة وحدان حكاية نفس متكلم از نفي فعل مستقبل مجهول ضمير درو أنا",
                    options: ["لم أَفعلْ", "لا أُفعلُ", "ما فُعلتُ"],
                    correctAnswer: 1
                },
                {
                    question: "واذا أردت أن تنفي الفعل المستقبل فزد في اوّله ......",
                    options: ["ما", "لم", "لا"],
                    correctAnswer: 2
                },
                {
                    question: "وإذا أردت ان تجعل المستقبل مجهولا فافتح علامة الاستقبال واضمم عين الفعل",
                    options: ["لا صحيح", "صحيح", "غير"],
                    correctAnswer: 0
                },
                {
                    question: "صيغة جمع مؤنث حاضر از نفي فعل مستقبل معروف ضمير درو أنتن",
                    options: ["تفعلن", "فعلن", "لم تفعلن"],
                    correctAnswer: 2
                },
                {
                    question: "اذا أردت ان تجعل الفعل المستقبل على التأكيد مع النفي فادخل عليه .....",
                    options: ["أن", "لن", "إن"],
                    correctAnswer: 1
                },
                {
                    question: "صيغة وحدان مذكر از أمر حاضر ضمير درو أنتَ",
                    options: ["إفعل", "إفعلي", "إفعلوا"],
                    correctAnswer: 0
                },
                {
                    question: "نون التأكيد كم هي",
                    options: ["3", "2", "1"],
                    correctAnswer: 1
                },
                {
                    question: "صيغة جمع مؤنث از نهي حاضر ضمير درو أنتن",
                    options: ["لا تفعلنْ", "ليفعلنّ", "لم تُفعَلنْ"],
                    correctAnswer: 0
                },
                {
                    question: "صيغة وحدان مذكر از اسم المفعول ضمير درو هو",
                    options: ["فاعل", "مفعول", "مفعولة"],
                    correctAnswer: 1
                }
            ],
            
            // 7. Tasawwuf
            "7": [
                {
                    question: "മസ്നവിയുടെ രചയിതാവ്",
                    options: ["ഇമാം ഗസാലി", "റൂമി", "ഖുശൈരി"],
                    correctAnswer: 1
                },
                {
                    question: "ഇഹ്‌യാ ഉലൂമുദ്ധീ ന്റെ രചയിതാവ്",
                    options: ["റൂമി", "ജുനൈദുൽ ബാഗ്ദാദി", "ഇമാം ഗസാലി"],
                    correctAnswer: 2
                },
                {
                    question: "അൽ ഹികമുൽ അതാഇയ്യ യുടെ രചയിതാവ്",
                    options: ["ഖാജാ ജിഷ്തി അജ്മീരി", "അബ്ദുറഹ്മാൻ അൽ ജാമി", "ഇബ്ൻ അതാഇല്ലാഹി സിക്കന്ദരി"],
                    correctAnswer: 2
                },
                {
                    question: "ബഹ്ജത്തുൽ അസ്റാർ രചിച്ചതാര്",
                    options: ["അബ്ദുറഹ്മാൻ അൽ ജാമി", "മുഹമ്മദ്‌ ഇക്ബാൽ", "ഇബ്ൻ അറബി"],
                    correctAnswer: 0
                },
                {
                    question: "ഫുതൂഹാത്തുൽ മക്കിയ്യ രചിച്ചതാര്",
                    options: ["ഇബ്ൻ അറബി", "മുഹമ്മദ്‌ ഇക്ബാൽ", "ഫരീദദീൻ അത്താർ"],
                    correctAnswer: 0
                },
                {
                    question: "തസ്‌കിറത്തുൽ അവ് ലിയ രചിച്ചതാര്",
                    options: ["ഇമാം ഖുശയ്രി", "ഫരീദദീൻ അത്താർ", "ഇബ്ൻ അറബി"],
                    correctAnswer: 1
                },
                {
                    question: "ഫീഹി മാ ഫീഹി രചിച്ചതാര്",
                    options: ["മുഹമ്മദ്‌ ഇക്ബാൽ", "റൂമി", "ഖുഷയ്രി"],
                    correctAnswer: 1
                },
                {
                    question: "ഖാബ ഖവ്സൈനി രചിച്ചതാര്",
                    options: ["ഇബ്ൻ അറബി", "ജുനൈദുൽ ഭാഗ്ദാദി", "മുഹമ്മദ്‌ ഇക്ബാൽ"],
                    correctAnswer: 2
                },
                {
                    question: "റാബിയ അൽഅദവിയ്യ (ഖ) ജനന വർഷം",
                    options: ["AD 720", "AD 717", "AD 731"],
                    correctAnswer: 1
                },
                {
                    question: "ജുനൈദുൽ ഭാഗ്ദാദി (ഖ) ജനനം",
                    options: ["AD 780", "AD 810", "AD 830"],
                    correctAnswer: 2
                },
                {
                    question: "ഇബ്രാഹിം ബിൻ അധ്ഹം (ഖ) ജനനം",
                    options: ["AD 820", "AD 718", "AD 696"],
                    correctAnswer: 1
                },
                {
                    question: "അബ്ദുൽ ഖാദിർ ജീലാനി (ഖ) ജനനം",
                    options: ["AD 1077", "AD 1091", "AD 1202"],
                    correctAnswer: 0
                },
                {
                    question: "ബാ യാസീദുൽ ബസ്താമി (ഖ) ജനനം",
                    options: ["AD 804", "AD 812", "AD 792"],
                    correctAnswer: 0
                },
                {
                    question: "ജിഷ്തി അജ്മീരി (ഖ) ജനനം",
                    options: ["AD 1124", "AD 1154", "AD 1141"],
                    correctAnswer: 2
                },
                {
                    question: "ജലാലുദ്ധീൻ റൂമി (ഖ) ജനനം",
                    options: ["AD 896", "AD 1207", "AD 1303"],
                    correctAnswer: 1
                },
                {
                    question: "നിസാമുദ്ധീൻ ഔലിയ (ഖ) ജനനം",
                    options: ["AD 1238", "AD 1228", "AD 1218"],
                    correctAnswer: 0
                },
                {
                    question: "അമീർ ഖുസ് റു (ഖ) ജനനം",
                    options: ["AD1229", "AD 1354", "AD 1253"],
                    correctAnswer: 2
                },
                {
                    question: "ശംസുദ്ധീൻ തബ്രീസി (ഖ) യുടെ പ്രദേശം",
                    options: ["ഇറാഖ്", "ഇറാൻ", "ഈജിപ്‌ത്"],
                    correctAnswer: 1
                },
                {
                    question: "അബു ഥാലിബ്‌ അൽ മക്കി (ഖ) യുടെ പ്രദേശം",
                    options: ["ജോർദാൻ", "ഈജിപ്‌ത്", "ഇറാഖ്"],
                    correctAnswer: 2
                },
                {
                    question: "അഹ്മദ് തീജാനി (ഖ) യുടെ പ്രദേശം",
                    options: ["സെർബിയ", "അൽജീരിയ", "മൊറോക്കോ"],
                    correctAnswer: 1
                }
            ],
            
            // 8. Arabic
            "8": [
                {
                    question: "رأس",
                    options: ["head", "hand", "leg"],
                    correctAnswer: 0
                },
                {
                    question: "صباح الخير",
                    options: ["good evening", "good afternoon", "good morning"],
                    correctAnswer: 2
                },
                {
                    question: "سيارة",
                    options: ["plane", "car", "bike"],
                    correctAnswer: 1
                },
                {
                    question: "قهوة",
                    options: ["coffee", "tea", "juice"],
                    correctAnswer: 0
                },
                {
                    question: "منديل",
                    options: ["cap", "shirt", "towel"],
                    correctAnswer: 2
                },
                {
                    question: "طبيب",
                    options: ["patient", "doctor", "nurse"],
                    correctAnswer: 1
                },
                {
                    question: "ليل",
                    options: ["day", "night", "afternoon"],
                    correctAnswer: 1
                },
                {
                    question: "فم",
                    options: ["mouth", "teeth", "nile"],
                    correctAnswer: 0
                },
                {
                    question: "زهرة",
                    options: ["ground", "flower", "plant"],
                    correctAnswer: 1
                },
                {
                    question: "شارع",
                    options: ["street", "city", "bridge"],
                    correctAnswer: 0
                },
                {
                    question: "مدرسة",
                    options: ["restaurant", "college", "school"],
                    correctAnswer: 2
                },
                {
                    question: "سوق",
                    options: ["market", "place", "field"],
                    correctAnswer: 0
                },
                {
                    question: "مكتبة",
                    options: ["office", "program", "student"],
                    correctAnswer: 0
                },
                {
                    question: "قاعة",
                    options: ["playground", "hall", "science"],
                    correctAnswer: 1
                },
                {
                    question: "لحم",
                    options: ["egg", "meat", "milk"],
                    correctAnswer: 1
                },
                {
                    question: "شرطي",
                    options: ["postman", "engineer", "police"],
                    correctAnswer: 2
                },
                {
                    question: "مطبخ",
                    options: ["garden", "kitchen", "market"],
                    correctAnswer: 1
                },
                {
                    question: "بئر",
                    options: ["river", "sea", "well"],
                    correctAnswer: 2
                },
                {
                    question: "قرية",
                    options: ["village", "city", "town"],
                    correctAnswer: 0
                },
                {
                    question: "غابة",
                    options: ["garden", "field", "forest"],
                    correctAnswer: 2
                }
            ],
            
            // 9. Urdu
            "9": [
                {
                    question: "چوتھا",
                    options: ["5th", "4th", "6th"],
                    correctAnswer: 1
                },
                {
                    question: "چھٹا",
                    options: ["4th", "8th", "6th"],
                    correctAnswer: 2
                },
                {
                    question: "ساتواں",
                    options: ["3rd", "9th", "7th"],
                    correctAnswer: 2
                },
                {
                    question: "آدھا",
                    options: ["1/2", "1/4", "3/4"],
                    correctAnswer: 0
                },
                {
                    question: "پونا",
                    options: ["1/2", "1/4", "3/4"],
                    correctAnswer: 2
                },
                {
                    question: "ساڑھے",
                    options: ["1 1/2", "2 1/2", "3 1/2"],
                    correctAnswer: 0
                },
                {
                    question: "تھائی",
                    options: ["3/4", "4/5", "2/3"],
                    correctAnswer: 2
                },
                {
                    question: "چوتھائی",
                    options: ["1/4", "1/3", "2/3"],
                    correctAnswer: 0
                },
                {
                    question: "سوا",
                    options: ["1 1/3", "2 1/2", "1 1/4"],
                    correctAnswer: 2
                },
                {
                    question: "پچاس",
                    options: ["45", "50", "55"],
                    correctAnswer: 1
                },
                {
                    question: "چونسٹھ",
                    options: ["84", "74", "64"],
                    correctAnswer: 2
                },
                {
                    question: "تہتر",
                    options: ["43", "73", "52"],
                    correctAnswer: 1
                },
                {
                    question: "چھیاسی",
                    options: ["46", "86", "36"],
                    correctAnswer: 1
                },
                {
                    question: "نواسی",
                    options: ["99", "89", "49"],
                    correctAnswer: 1
                },
                {
                    question: "اٹھانوے",
                    options: ["98", "79", "59"],
                    correctAnswer: 0
                },
                {
                    question: "تریپن",
                    options: ["33", "53", "73"],
                    correctAnswer: 1
                },
                {
                    question: "چھیالیس",
                    options: ["46", "64", "74"],
                    correctAnswer: 0
                },
                {
                    question: "چھتیس",
                    options: ["36", "83", "28"],
                    correctAnswer: 0
                },
                {
                    question: "گیارہ",
                    options: ["11", "12", "13"],
                    correctAnswer: 0
                },
                {
                    question: "انیس",
                    options: ["29", "69", "19"],
                    correctAnswer: 2
                }
            ],
            
            // 10. Malayalam
            "10": [
                {
                    question: "ആധുനിക മലയാള സാഹിത്യത്തിന്റെ പിതാവ് എന്നറിയപ്പെടുന്നത് ആരാണ്?",
                    options: ["തകഴി", "ബഷീർ", "എം ട്ടി വാസുദേവൻ"],
                    correctAnswer: 0
                },
                {
                    question: "1965-ൽ ജ്ഞാനപീഠ പുരസ്കാരം നേടിയ മലയാളത്തിലെ പ്രശസ്ത കവി?",
                    options: ["കെ സച്ചിദാനന്ദൻ", "ജി ശങ്കര കുറുപ്പ്", "ഒ എൻ വി കുറുപ്പ്"],
                    correctAnswer: 1
                },
                {
                    question: "പ്രശസ്ത മലയാള നോവലായ 'ചെമ്മീൻ' എഴുതിയത് ആരാണ്?",
                    options: ["കമല സുരയ്യ", "തകഴി", "ഒ എൻ വി കുറുപ്പ്"],
                    correctAnswer: 1
                },
                {
                    question: "ബാല്യകാലസഖി' എന്ന കൃതിയിലൂടെ പ്രശസ്തനായ മലയാള എഴുത്തുകാരൻ?",
                    options: ["ബഷീർ", "എം ട്ടി വാസുദേവൻ", "ജി ശങ്കര കുറുപ്പ്"],
                    correctAnswer: 0
                },
                {
                    question: "പ്രശസ്ത മലയാള നോവലായ 'നാലുകെട്ട്' എഴുതിയത് ആരാണ്?",
                    options: ["വൈലോപ്പിള്ളി", "എം ട്ടി വാസുദേവൻ", "അരുന്ധതി റോയ്"],
                    correctAnswer: 1
                },
                {
                    question: "രണ്ടിടങ്ങഴി' എന്ന കൃതിയിലൂടെ പ്രശസ്തനായ മലയാള എഴുത്തുകാരൻ?",
                    options: ["തകഴി", "ആർ കെ നാരായണൻ", "കമല സുരയ്യ"],
                    correctAnswer: 0
                },
                {
                    question: "ഖസക്കിൻ്റെ ഇതിഹാസം' എന്ന പ്രശസ്ത മലയാള നോവലിൻ്റെ രചയിതാവ് ആരാണ്?",
                    options: ["അരുന്ധതി റോയ്", "ഒ വി വിജയൻ", "ആർ കെ നാരായണൻ"],
                    correctAnswer: 1
                },
                {
                    question: "ഒരു ദേശത്തിന്റെ കഥ' എന്ന കൃതിയിലൂടെ പ്രശസ്തനായ മലയാള എഴുത്തുകാരൻ?",
                    options: ["ഒ എൻ വി കുറുപ്പ്", "തകഴി", "എസ് കെ പൊറ്റക്കാട്"],
                    correctAnswer: 2
                },
                {
                    question: "നാലുകെട്ട് എന്ന പ്രശസ്ത മലയാള നോവലിൻ്റെ രചയിതാവ് ആരാണ്??",
                    options: ["എസ് കെ പൊറ്റക്കാട്", "ജുംപ ലാഹിരി", "എം ട്ടി വാസുദേവൻ"],
                    correctAnswer: 2
                },
                {
                    question: "കുന്ദലത' എന്ന കൃതിയിലൂടെ പ്രശസ്തനായ മലയാള എഴുത്തുകാരൻ?",
                    options: ["അപ്പു നെടുങ്ങാടി", "വെയ്ലോപ്പിള്ളി", "ഒ എൻ വി കുറുപ്പ്"],
                    correctAnswer: 0
                },
                {
                    question: "മലയാളത്തിലെ ആദ്യത്തെ നോവൽ ഏതാണ്?",
                    options: ["കുറ്റി", "അടുത്തത്", "കുണ്ഠിലിനി"],
                    correctAnswer: 0
                },
                {
                    question: "ആരോഹണം എഴുതിയത് ആരാണ്?",
                    options: ["കുമാരനാശാൻ", "വി കെ എൻ", "ഒ വി വിജയൻ"],
                    correctAnswer: 1
                },
                {
                    question: "ആരാണ് കുട്ടനാടിന്റെ ഇതിഹാസ കാരൻ",
                    options: ["തുഞ്ചത്തെഴുത്തച്ഛൻ", "തകഴി", "ബഷീർ"],
                    correctAnswer: 1
                },
                {
                    question: "മലയാളത്തിൽ 'ലക്ഷണമോഹ' നോവൽ എന്നറിയപ്പെടുന്നത് ഏത്?",
                    options: ["കുന്ദലത", "അടുത്തത്", "ഷാരധ"],
                    correctAnswer: 1
                },
                {
                    question: "പാത്തുമ്മയുടെ ആടു' എഴുതിയത് ആരാണ്?",
                    options: ["ബഷീർ", "ഉറൂബ്", "ഫിറോസ്"],
                    correctAnswer: 0
                },
                {
                    question: "സ്നാനം എന്നതിന്റെ അർത്ഥം",
                    options: ["പോവുക", "കുളിക്കുക", "തബസ്സിരിക്കുക"],
                    correctAnswer: 1
                },
                {
                    question: "അഭിഷേകം എന്നതിന്റെ അർത്ഥം",
                    options: ["ഊഹം", "സ്വപ്നം", "ഒഴിക്കുക"],
                    correctAnswer: 2
                },
                {
                    question: "ലത എന്നാൽ എന്ത്",
                    options: ["വേര്", "തണ്ട്", "വള്ളി"],
                    correctAnswer: 2
                },
                {
                    question: "ഒരമ്മ പെറ്റ പന്തിര കുലത്തിലെ കഥാപാത്രം",
                    options: ["ബിജു", "നാറാണത് ഭ്രാന്തൻ", "സ്വാമി"],
                    correctAnswer: 1
                },
                {
                    question: " 'ഞാൻ അവനെ അടിച്ചു' എന്നതിൽ ക്രിയ ഏതാണ്?",
                    options: ["ഞാൻ", "അവനെ", "അടിച്ചു"],
                    correctAnswer: 2
                }
            ],
            
            // 11. English
            "11": [
                {
                    question: "he was a good fighter. what is he?",
                    options: ["noun", "pronoun", "adjective"],
                    correctAnswer: 1
                },
                {
                    question: "soldier killed enemy. select the verb from this",
                    options: ["killed", "soldier", "enemy"],
                    correctAnswer: 0
                },
                {
                    question: "rashid went to school. which noun used here as subject",
                    options: ["to", "school", "rashid"],
                    correctAnswer: 2
                },
                {
                    question: "Bakreed is my favourite day of the year. Which word is the proper noun?",
                    options: ["Bakreed", "year", "my"],
                    correctAnswer: 0
                },
                {
                    question: "The dog ran across the farmyard. select the preposition",
                    options: ["across", "the", "farmyard"],
                    correctAnswer: 0
                },
                {
                    question: "We bought a black cat from the Pets At Home. Which word is the adjective?",
                    options: ["pet", "black", "bought"],
                    correctAnswer: 1
                },
                {
                    question: "Sufyan is singing his favourite song. Which word is the verb?",
                    options: ["is", "favorite", "singing"],
                    correctAnswer: 2
                },
                {
                    question: "I heared a beautiful Qur'an recitation. which word is adjective?",
                    options: ["beautiful", "recitation", "Qur'an"],
                    correctAnswer: 0
                },
                {
                    question: "We went to Hyderabad on wednesday. What type of word is Wednesday?",
                    options: ["noun", "pronoun", "adjective"],
                    correctAnswer: 0
                },
                {
                    question: "The happy frog leaped from leaf to leaf in the pond. What type of word is happy?",
                    options: ["adverb", "preposition", "adjective"],
                    correctAnswer: 2
                },
                {
                    question: "The train reached in Kuttippuram fastly. what type of word is fastly?",
                    options: ["adjective", "conjunction", "adverb"],
                    correctAnswer: 2
                },
                {
                    question: "That car is driving very quickly. which word is adverb in this?",
                    options: ["quickly", "driving", "is"],
                    correctAnswer: 0
                },
                {
                    question: "Birds migrate when it gets cold. Which word is the noun?",
                    options: ["cold", "birds", "when"],
                    correctAnswer: 1
                },
                {
                    question: "He was my old friend. Which word is the pronoun?",
                    options: ["my", "old", "he"],
                    correctAnswer: 2
                },
                {
                    question: "Adam swam amazingly to win a gold medal in the Olympics. What type of word is amazingly?",
                    options: ["interjection", "conjunction", "adverb"],
                    correctAnswer: 2
                },
                {
                    question: "The teacher always tried to solve that problem. What type of word is always?",
                    options: ["verb", "adverb", "adjective"],
                    correctAnswer: 1
                },
                {
                    question: "The boy was happy because he was going fishing with his dad. Which word is the pronoun?",
                    options: ["he", "was", "with"],
                    correctAnswer: 0
                },
                {
                    question: "Suhail gave a gift to teacher. which word is the preposition?",
                    options: ["a", "to", "gave"],
                    correctAnswer: 1
                },
                {
                    question: "rasheed requested to move side. what type of word is requested?",
                    options: ["adverb", "verb", "adjective"],
                    correctAnswer: 1
                },
                {
                    question: "I will go to Delhi. Which word is the proper noun?",
                    options: ["I", "go", "Delhi"],
                    correctAnswer: 2
                }
            ],
            
            // 12. Hindi
            "12": [
                {
                    question: "Select the correct (नमस्ते)",
                    options: ["hello", "welcome", "thanks"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (स्वागत)",
                    options: ["good bye", "see you", "welcome"],
                    correctAnswer: 2
                },
                {
                    question: "Select the correct (धन्यवाद)",
                    options: ["please", "thank you", "sorry"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (माफ़ करना)",
                    options: ["little", "good afternoon", "sorry"],
                    correctAnswer: 2
                },
                {
                    question: "Select the correct (सुसंध्या)",
                    options: ["good morning", "good evening", "good night"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (फिर मिलेंगे)",
                    options: ["see you", "good bye", "tomorrow"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (सुंदर)",
                    options: ["fast", "beautiful", "revenge"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (आशा)",
                    options: ["need", "hope", "today"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (रैना)",
                    options: ["day", "night", "evening"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (चलो)",
                    options: ["let's go", "stop there", "running"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (रुको)",
                    options: ["bye", "stop", "super"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (अच्छा)",
                    options: ["good", "bad", "nothing"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (खाना)",
                    options: ["water", "juice", "food"],
                    correctAnswer: 2
                },
                {
                    question: "Select the correct (आज)",
                    options: ["today", "yesterday", "tomorrow"],
                    correctAnswer: 0
                },
                {
                    question: "Select the correct (खेलो)",
                    options: ["eat", "drink", "play"],
                    correctAnswer: 2
                },
                {
                    question: "Select the correct (पानी)",
                    options: ["grape", "water", "orange"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (भाई)",
                    options: ["mom", "brother", "bap"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (बहन)",
                    options: ["daughter", "mom", "sister"],
                    correctAnswer: 2
                },
                {
                    question: "Select the correct (परिवार)",
                    options: ["school", "family", "market"],
                    correctAnswer: 1
                },
                {
                    question: "Select the correct (मोहब्बत)",
                    options: ["hate", "ego", "love"],
                    correctAnswer: 2
                }
            ],
            
            // 13. Mathematics
            "13": [
                {
                    question: "6+5?",
                    options: ["20", "13", "11"],
                    correctAnswer: 2
                },
                {
                    question: "7+18?",
                    options: ["25", "31", "22"],
                    correctAnswer: 0
                },
                {
                    question: "6×7?",
                    options: ["54", "38", "42"],
                    correctAnswer: 2
                },
                {
                    question: "25+39?",
                    options: ["74", "64", "58"],
                    correctAnswer: 1
                },
                {
                    question: "12÷3?",
                    options: ["4", "3", "6"],
                    correctAnswer: 0
                },
                {
                    question: "56÷7?",
                    options: ["6", "7", "8"],
                    correctAnswer: 2
                },
                {
                    question: "80÷8?",
                    options: ["11", "10", "9"],
                    correctAnswer: 1
                },
                {
                    question: "72-9?",
                    options: ["63", "58", "61"],
                    correctAnswer: 0
                },
                {
                    question: "44-7?",
                    options: ["35", "37", "39"],
                    correctAnswer: 1
                },
                {
                    question: "60-13?",
                    options: ["37", "57", "47"],
                    correctAnswer: 2
                },
                {
                    question: "2,4,6,8,_?",
                    options: ["10", "12", "9"],
                    correctAnswer: 0
                },
                {
                    question: "7,10,13,16,_?",
                    options: ["18", "19", "20"],
                    correctAnswer: 1
                },
                {
                    question: "2,0,-2,-4,_?",
                    options: ["-3", "-5", "-6"],
                    correctAnswer: 2
                },
                {
                    question: "-4,8,16,_?",
                    options: ["24", "20", "26"],
                    correctAnswer: 0
                },
                {
                    question: "3/7+4/7?",
                    options: ["6/7", "7/7", "8/7"],
                    correctAnswer: 1
                },
                {
                    question: "5/8+2/8?",
                    options: ["6/8", "7/8", "8/8"],
                    correctAnswer: 1
                },
                {
                    question: "1/4,1/2  which is the great?",
                    options: ["1/4", "both are equal", "1/2"],
                    correctAnswer: 2
                },
                {
                    question: "3/4,6/12 which is the great?",
                    options: ["both are equal", "3/4", "6/12"],
                    correctAnswer: 1
                },
                {
                    question: "3 1/4 =?",
                    options: ["12/4", "13/4", "11/4"],
                    correctAnswer: 1
                },
                {
                    question: "100×100?",
                    options: ["10,000", "1,00,000", "10,00,000"],
                    correctAnswer: 0
                }
            ],
            
            // 14. Social science
            "14": [
                {
                    question: "What is history?",
                    options: ["Study of stars", "Study of past events", "Study of animals"],
                    correctAnswer: 1
                },
                {
                    question: "Who are archaeologists?",
                    options: ["People who write books", "People who study old coins and buildings", "People who make laws"],
                    correctAnswer: 1
                },
                {
                    question: "What are manuscripts?",
                    options: ["Printed books", "Newspaper articles", "Handwritten records"],
                    correctAnswer: 2
                },
                {
                    question: "The word 'India' comes from which river's name?",
                    options: ["Ganga", "Narmada", "Indus"],
                    correctAnswer: 2
                },
                {
                    question: "The earliest people lived near which type of place?",
                    options: ["rivers", "mountains", "deserts"],
                    correctAnswer: 0
                },
                {
                    question: "What does BC stand for in history?",
                    options: ["Before Coffee", "Before Christ", "Before Calendar"],
                    correctAnswer: 1
                },
                {
                    question: "What did early humans use for tools?",
                    options: ["iron", "plastic", "stone"],
                    correctAnswer: 2
                },
                {
                    question: "In which age did people start farming?",
                    options: ["ice age", "stone age", "modern age"],
                    correctAnswer: 1
                },
                {
                    question: "Which material was used to make tools in the Neolithic age?",
                    options: ["Bronze", "Plastic", "Polished stone"],
                    correctAnswer: 2
                },
                {
                    question: "The Harappan cities were known for their:",
                    options: ["Big markets", "Planned layout and drainage system", "Temples"],
                    correctAnswer: 1
                },
                {
                    question: "Which animal was important in Harappan culture?",
                    options: ["tiger", "elephant", "bull"],
                    correctAnswer: 2
                },
                {
                    question: "Who discovered Harappa?",
                    options: ["R.D. Banerji", "Ashoka", "Mourya"],
                    correctAnswer: 0
                },
                {
                    question: "Vedas are written in which language?",
                    options: ["Tamil", "Hindi", "Sanskrit"],
                    correctAnswer: 2
                },
                {
                    question: "Which Veda is the oldest?",
                    options: ["Sama Veda", "Rigveda", "Yajur Veda"],
                    correctAnswer: 1
                },
                {
                    question: "Who composed the Rigveda?",
                    options: ["Farmers", "priests", "kings"],
                    correctAnswer: 1
                },
                {
                    question: "The Janapadas were:",
                    options: ["Forests", "Villages", "Small kingdoms"],
                    correctAnswer: 2
                },
                {
                    question: "Magadha was located in which part of India?",
                    options: ["North-East", "South", "West"],
                    correctAnswer: 0
                },
                {
                    question: "Ashoka belonged to which dynasty?",
                    options: ["Maurya", "Gupta", "Mughal"],
                    correctAnswer: 0
                },
                {
                    question: "Who was the founder of Buddhism?",
                    options: ["Mahavira", "Ashoka", "Gautama Buddha"],
                    correctAnswer: 2
                },
                {
                    question: "What does AD stand for?",
                    options: ["After Date", "Anno Domini", "Ancient Day"],
                    correctAnswer: 1
                }
            ],
            
            // 15. IT
            "15": [
                {
                    question: "What does IT stand for?",
                    options: ["Internet Team", "Information Technology", "Internal Tool"],
                    correctAnswer: 1
                },
                {
                    question: "Which device is used to input data into a computer?",
                    options: ["Monitor", "Keyboard", "Printer"],
                    correctAnswer: 1
                },
                {
                    question: "What is the brain of the computer?",
                    options: ["Monitor", "UPS", "CPU"],
                    correctAnswer: 2
                },
                {
                    question: "Which one is an output device?",
                    options: ["Mouse", "Scanner", "Printer"],
                    correctAnswer: 2
                },
                {
                    question: "Which of the following stores data permanently?",
                    options: ["RAM", "Hard Disk", "ROM"],
                    correctAnswer: 1
                },
                {
                    question: "What does CPU stand for?",
                    options: ["Central Processing Unit", "Computer Power Unit", "Control Program Unit"],
                    correctAnswer: 0
                },
                {
                    question: "Which software helps to browse the internet?",
                    options: ["MS Word", "Chrome", "Paint"],
                    correctAnswer: 1
                },
                {
                    question: "What is the full form of URL?",
                    options: ["Uniform Resource Locator", "Universal Record Link", "Unique Reference Link"],
                    correctAnswer: 0
                },
                {
                    question: "What is the full form of Wi-Fi?",
                    options: ["Wireless Finder", "Wide Fidelity", "Wireless Fidelity"],
                    correctAnswer: 2
                },
                {
                    question: "Which device is used to click and select on screen?",
                    options: ["Keyboard", "CPU", "Mouse"],
                    correctAnswer: 2
                },
                {
                    question: "What is software?",
                    options: ["A physical part", "A program that runs on a computer", "A storage device"],
                    correctAnswer: 1
                },
                {
                    question: "What is an example of an operating system?",
                    options: ["Windows", "Google", "Excel"],
                    correctAnswer: 0
                },
                {
                    question: "What does HTTP stand for?",
                    options: ["Hyper Type Text Protocol", "Hypertext Transfer Protocol", "Home Transfer Text Program"],
                    correctAnswer: 1
                },
                {
                    question: "Which part displays the output?",
                    options: ["Monitor", "Speaker", "Headset"],
                    correctAnswer: 0
                },
                {
                    question: "What is the main page of a website called?",
                    options: ["Link page", "First page", "Home page"],
                    correctAnswer: 2
                },
                {
                    question: "What is the use of MS Word?",
                    options: ["Watching movies", "Making documents", "Listening to music"],
                    correctAnswer: 1
                },
                {
                    question: "What is the full form of PDF?",
                    options: ["Portable Document Format", "Print Document File", "Page Data Format"],
                    correctAnswer: 0
                },
                {
                    question: "Which of these is a search engine?",
                    options: ["Gmail", "Google", "YouTube"],
                    correctAnswer: 1
                },
                {
                    question: "What does RAM stand for?",
                    options: ["Read Access Memory", "Random Access Memory", "Random Application Module"],
                    correctAnswer: 1
                },
                {
                    question: "Who is known as the 'Father of the Computer'?",
                    options: ["Charles Babbage", "Alan Turing", "Bill Gates"],
                    correctAnswer: 0
                }
            ],
            
            // 16. Science
            "16": [
                {
                    question: "What do plants need to make food?",
                    options: ["Sunlight", "Moonlight", "Wind"],
                    correctAnswer: 0
                },
                {
                    question: "Which gas do we breathe in to stay alive?",
                    options: ["Oxygen", "Carbon dioxide", "Nitrogen"],
                    correctAnswer: 0
                },
                {
                    question: "What is the name of our galaxy?",
                    options: ["Milky Way", "Andromeda", "Triangulum"],
                    correctAnswer: 0
                },
                {
                    question: "Water boils at:",
                    options: ["0°C", "50°C", "100°C"],
                    correctAnswer: 2
                },
                {
                    question: "Which part of the plant absorbs water?",
                    options: ["Leaf", "Root", "Flower"],
                    correctAnswer: 1
                },
                {
                    question: "The Earth revolves around the:",
                    options: ["Moon", "Sun", "Mars"],
                    correctAnswer: 1
                },
                {
                    question: "The hardest natural substance is:",
                    options: ["Gold", "Iron", "Diamond"],
                    correctAnswer: 2
                },
                {
                    question: "Which phenomenon occurs when the Moon passes between the Sun and Earth?",
                    options: ["Transit", "Lunar eclipse", "Solar eclipse"],
                    correctAnswer: 2
                },
                {
                    question: "Which organ pumps blood in our body?",
                    options: ["Lungs", "Heart", "Brain"],
                    correctAnswer: 1
                },
                {
                    question: "Which planet is known as the 'Red Planet'?",
                    options: ["Mars", "Venus", "Jupiter"],
                    correctAnswer: 0
                },
                {
                    question: "What do we use to see tiny things?",
                    options: ["Telescope", "Microscope", "Camera"],
                    correctAnswer: 1
                },
                {
                    question: "Which of the following is a solid?",
                    options: ["Milk", "Stone", "Water"],
                    correctAnswer: 1
                },
                {
                    question: "What is the study of the universe beyond Earth's atmosphere called?",
                    options: ["Science", "Astrology", "Cosmology"],
                    correctAnswer: 0
                },
                {
                    question: "Which of these is a sense organ?",
                    options: ["Hair", "Bone", "Nose"],
                    correctAnswer: 2
                },
                {
                    question: "How many bones are there in an adult human body?",
                    options: ["300", "206", "258"],
                    correctAnswer: 1
                },
                {
                    question: "Which vitamin do we get from sunlight?",
                    options: ["Vitamin C", "Vitamin D", "Vitamin A"],
                    correctAnswer: 1
                },
                {
                    question: "What is H2O?",
                    options: ["Salt", "Oxygen", "Water"],
                    correctAnswer: 2
                },
                {
                    question: "Which is a liquid?",
                    options: ["Ice", "Steam", "Milk"],
                    correctAnswer: 2
                },
                {
                    question: "What is a black hole?",
                    options: ["A region of space with gravity so strong that nothing can escape", "A type of star", "An empty region in space"],
                    correctAnswer: 0
                },
                {
                    question: "What helps plants to grow?",
                    options: ["Rocks, plastic, wind", "Cement, water, sun", "Soil, water, sunlight"],
                    correctAnswer: 2
                }
            ]
        };

        // Subject names mapping
        const subjectNames = {
            "1": "Qur'an",
            "2": "Hadith", 
            "3": "Fiqh",
            "4": "Thareeq",
            "5": "Nahv",
            "6": "Swarf",
            "7": "Tasawwuf",
            "8": "Arabic",
            "9": "Urdu",
            "10": "Malayalam",
            "11": "English",
            "12": "Hindi",
            "13": "Mathematics",
            "14": "Social Science",
            "15": "IT",
            "16": "Science"
        };

        // Initialize variables
        let audioContext;
        let matrixMode = "green";
        let gameStarted = false;
        let commandHistory = [];
        let userSession = {
            firstCommand: false,
            nameAsked: false,
            emailAsked: false,
            userName: '',
            userEmail: '',
            dataSubmitted: false,
            messages: [],
                // Add these new properties
    messagingMode: null, // 'gmail', 'whatsapp', 'telegram'
    messagingStep: 0, // 0: none, 1: asking for contact, 2: confirmation
    messagingContact: ''
        };

        // Quiz variables
        let quizSession = {
            currentSubject: null,
            currentQuestion: 0,
            currentScore: 0,
            completedSubjects: {},
            totalScore: 0,
            allResults: {}
        };

        // Initialize Audio Context
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Generate alert sound
        function playAlertSound(duration = 1000) {
            if (!audioContext) initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration / 1000);
        }

        // Email validation
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Send data to Google Sheets
        async function sendToGoogleSheets(name, email) {
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbzcRHO-5tOPSCD9uLyIK_TVWEaw6o-p2d60pXKc_is8J4jWNFvAODC_BS69qEhZF5cY1g/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&action=register`
                });
                return true;
            } catch (error) {
                console.error('Error sending data:', error);
                return false;
            }
        }

        // Send message log to Google Sheets
        async function sendMessageToSheet(message) {
            if (userSession.dataSubmitted && userSession.userName && userSession.userEmail) {
                try {
                    await fetch('https://script.google.com/macros/s/AKfycbzcRHO-5tOPSCD9uLyIK_TVWEaw6o-p2d60pXKc_is8J4jWNFvAODC_BS69qEhZF5cY1g/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `name=${encodeURIComponent(userSession.userName)}&email=${encodeURIComponent(userSession.userEmail)}&message=${encodeURIComponent(message)}&timestamp=${encodeURIComponent(new Date().toLocaleString())}&action=message`
                    });
                } catch (error) {
                    console.error('Error sending message:', error);
                }
            }
        }
                // Modified File Upload Functions
function handleFileUpload(event) {
    const file = event.target.files[0];
    if (!file) return;

    if (file.size > 100 * 1024 * 1024) { // 100MB limit
        const output = document.getElementById("commandOutput");
        const timestamp = new Date().toLocaleTimeString();
        output.innerHTML += `\n[${timestamp}] ERROR: FILE TOO LARGE (MAX 100MB)\n`;
        const terminal = document.getElementById("terminal");
        terminal.scrollTop = terminal.scrollHeight;
        return;
    }

    const progressDiv = document.getElementById('fileUploadProgress');
    progressDiv.style.display = 'block';
    progressDiv.textContent = 'UPLOADING FILE...';

    // Upload file to cloud service and get direct link
    uploadFileToCloud(file);
    
    // Clear the input
    event.target.value = '';
}

async function uploadFileToCloud(file) {
    try {
        // Convert file to base64 for permanent storage
        const base64Data = await fileToBase64(file);
        
        const fileInfo = {
            name: file.name,
            size: file.size,
            type: file.type || 'Unknown',
            lastModified: new Date(file.lastModified).toISOString(),
            base64Data: base64Data,
            key: 'file_' + Date.now()
        };

        document.getElementById('fileUploadProgress').textContent = 'SENDING TO DATABASE...';
        sendFileAsMessage(fileInfo);
    } catch (error) {
        console.error('Upload error:', error);
        const output = document.getElementById("commandOutput");
        const timestamp = new Date().toLocaleTimeString();
        output.innerHTML += `\n[${timestamp}] ERROR: FILE UPLOAD FAILED\n`;
        document.getElementById('fileUploadProgress').style.display = 'none';
    }
}


async function sendFileAsMessage(fileInfo) {
    if (userSession.dataSubmitted && userSession.userName && userSession.userEmail) {
        try {
            // Send file to Google Drive via Apps Script
            const fileUploadResponse = await fetch('https://script.google.com/macros/s/AKfycbzcRHO-5tOPSCD9uLyIK_TVWEaw6o-p2d60pXKc_is8J4jWNFvAODC_BS69qEhZF5cY1g/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `action=file_upload&name=${encodeURIComponent(userSession.userName)}&email=${encodeURIComponent(userSession.userEmail)}&fileName=${encodeURIComponent(fileInfo.name)}&fileSize=${encodeURIComponent(formatFileSize(fileInfo.size))}&fileType=${encodeURIComponent(fileInfo.type)}&base64Data=${encodeURIComponent(fileInfo.base64Data)}`
            });

            // Also send as message for notification
            const fileMessage = `📎 FILE UPLOADED SUCCESSFULLY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📄 FILENAME: ${fileInfo.name}
📊 SIZE: ${formatFileSize(fileInfo.size)}
🔧 TYPE: ${fileInfo.type}
📅 MODIFIED: ${fileInfo.lastModified}
🔑 FILE KEY: ${fileInfo.key}
✅ STATUS: SAVED TO GOOGLE DRIVE
💾 LOCATION: Accessible in Google Drive
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;

            await sendMessageToSheet(fileMessage);

            // Show success message in terminal
            const output = document.getElementById("commandOutput");
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML += `\n[${timestamp}] FILE UPLOADED TO GOOGLE DRIVE!\n`;
            output.innerHTML += `📄 FILE: ${fileInfo.name}\n`;
            output.innerHTML += `📊 SIZE: ${formatFileSize(fileInfo.size)}\n`;
            output.innerHTML += `✅ STATUS: SAVED TO YOUR GOOGLE DRIVE\n`;
            output.innerHTML += `💡 CHECK YOUR GOOGLE DRIVE FOR THE FILE\n`;

            const terminal = document.getElementById("terminal");
            terminal.scrollTop = terminal.scrollHeight;

        } catch (error) {
            console.error('Error uploading file:', error);
            const output = document.getElementById("commandOutput");
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML += `\n[${timestamp}] ERROR: FAILED TO UPLOAD FILE TO DRIVE\n`;
            const terminal = document.getElementById("terminal");
            terminal.scrollTop = terminal.scrollHeight;
        }
    } else {
        const output = document.getElementById("commandOutput");
        const timestamp = new Date().toLocaleTimeString();
        output.innerHTML += `\n[${timestamp}] ERROR: PLEASE COMPLETE REGISTRATION FIRST\n`;
        const terminal = document.getElementById("terminal");
        terminal.scrollTop = terminal.scrollHeight;
    }

    // Hide progress
    document.getElementById('fileUploadProgress').style.display = 'none';
}

// Helper functions
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

function simpleChecksum(data) {
    let checksum = 0;
    for (let i = 0; i < data.length; i++) {
        checksum += data.charCodeAt(i);
    }
    return checksum.toString(16).toUpperCase();
}
function fileToBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });
}

function addFileUploadToHelp() {
    const originalHelp = hackerResponses.help;
    if (!originalHelp.includes('📎 ATTACH')) {
        hackerResponses.help = originalHelp.replace(
            '• clear - Clear terminal',
            `• clear - Clear terminal
• 📎 ATTACH - Upload files (click attach button)`
        ) + `
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📎 FILE UPLOAD FEATURES:
   - Click ATTACH button to upload any file
   - Files converted to base64 and stored in database
   - Maximum file size: 100MB
   - All file types supported
   - Admin can download files from database
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
    }
}

// Call this function when the page loads
document.addEventListener('DOMContentLoaded', function() {
    addFileUploadToHelp();
});

          // Send quiz results to Google Sheets
        async function sendQuizResults() {
            if (userSession.dataSubmitted && userSession.userName && userSession.userEmail) {
                try {
                    const totalPossible = Object.keys(quizSession.completedSubjects).length * 20;
                    const accuracy = Math.round((quizSession.totalScore / totalPossible) * 100);
                    
                    await fetch('https://script.google.com/macros/s/AKfycbzcRHO-5tOPSCD9uLyIK_TVWEaw6o-p2d60pXKc_is8J4jWNFvAODC_BS69qEhZF5cY1g/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `name=${encodeURIComponent(userSession.userName)}&email=${encodeURIComponent(userSession.userEmail)}&results=${encodeURIComponent(JSON.stringify(quizSession.allResults))}&totalScore=${quizSession.totalScore}&totalPossible=${totalPossible}&accuracy=${accuracy}&timestamp=${encodeURIComponent(new Date().toLocaleString())}&action=quiz_results`
                    });
                    
                    // Show success message to user
                    const output = document.getElementById("commandOutput");
                    const timestamp = new Date().toLocaleTimeString();
                    output.innerHTML += `\n[${timestamp}] QUIZ RESULTS SAVED SUCCESSFULLY!\n`;
                    
                    const terminal = document.getElementById("terminal");
                    terminal.scrollTop = terminal.scrollHeight;
                    
                    return true;
                } catch (error) {
                    console.error('Error sending quiz results:', error);
                    return false;
                }
            }
            return false;
        }
        
        // Student Details Functions
        async function fetchStudentData() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSYd5HVi2ehHX75k62gciAcf1a8pTwKi3M0Mpyc4Fzlx8PgYCxWFI4BYCqjqnzm5w/pub?gid=1359753454&single=true&output=csv');
                const csvText = await response.text();
                return parseCSV(csvText);
            } catch (error) {
                console.error('Error fetching student data:', error);
                return null;
            }
        }

        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',').map(header => header.trim().replace(/"/g, ''));
            const students = {};
            
            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = lines[i].split(',').map(value => value.trim().replace(/"/g, ''));
                    if (values.length >= headers.length && values[1]) { // Check if AD NO exists
                        const adNo = values[1].trim();
                        const studentData = {};
                        headers.forEach((header, index) => {
                            studentData[header] = values[index] || 'N/A';
                        });
                        students[adNo] = studentData;
                    }
                }
            }
            return students;
        }

        function formatStudentDetails(student) {
            return `
STUDENT DETAILS RETRIEVED:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
NAME        : ${student.NAME || 'N/A'}
AD NO       : ${student['AD NO'] || 'N/A'}
S/O         : ${student['S/O'] || 'N/A'}
HOUSE NAME  : ${student['HOUSE NAME'] || 'N/A'}
PLACE       : ${student.PLACE || 'N/A'}
POST        : ${student.POST || 'N/A'}
PIN         : ${student.PIN || 'N/A'}
DISTRICT    : ${student.DISTRICT || 'N/A'}
STATE       : ${student.STATE || 'N/A'}
BLOOD GROUP : ${student['BLOOD GROUP'] || 'N/A'}
DOB         : ${student.DOB || 'N/A'}
PHONE       : ${student.PHONE || 'N/A'}
EMAIL       : ${student.EMAIL || 'N/A'}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
        }
         function displayPDF(pdfUrl) {
    return `
🔥 MALABART DOCUMENTATION ACCESS GRANTED 🔥
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📄 DOCUMENT: MALABART OFFICIAL DOCUMENTATION
🔗 SOURCE: ${pdfUrl}
⚡ STATUS: LOADING...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

<div style="width: 100%; height: 70vh; border: 2px solid #00ff00; border-radius: 10px; margin: 20px 0; background: rgba(0, 255, 0, 0.1);">
    <iframe src="${pdfUrl}" 
            style="width: 100%; height: 100%; border: none; border-radius: 8px;" 
            frameborder="0"
            allow="fullscreen"
            loading="lazy">
        <p style="color: #ff0000; padding: 20px; text-align: center;">
            ❌ PDF VIEWER NOT SUPPORTED IN THIS BROWSER
            <br><br>
            <a href="${pdfUrl}" target="_blank" style="color: #00ff00; text-decoration: underline;">
                🔗 CLICK HERE TO OPEN PDF IN NEW TAB
            </a>
        </p>
    </iframe>
</div>

🔒 CONFIDENTIAL DOCUMENT - AUTHORIZED ACCESS ONLY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
}

        // Check if command is a valid student ID
        function isValidStudentId(cmd) {
            const validIds = ['960'];
            // Add range 986-1021
            for (let i = 986; i <= 1021; i++) {
                validIds.push(i.toString());
            }
            return validIds.includes(cmd);
        }

        // Matrix Rain Effect
        class MatrixRain {
            constructor() {
                this.canvas = document.getElementById("matrixCanvas");
                this.ctx = this.canvas.getContext("2d");
                this.characters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZアイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン";
                this.drops = [];
                this.fontSize = 16;
                this.mode = "green";
                this.resize();
                this.init();
                this.animate();
                window.addEventListener("resize", () => this.resize());
                window.addEventListener("orientationchange", () => {
                    setTimeout(() => this.resize(), 300);
                });
            }

            resize() {
                const dpr = window.devicePixelRatio || 1;
                this.canvas.width = window.innerWidth * dpr;
                this.canvas.height = window.innerHeight * dpr;
                this.canvas.style.width = window.innerWidth + "px";
                this.canvas.style.height = window.innerHeight + "px";
                this.ctx.scale(dpr, dpr);
                this.columns = Math.floor(window.innerWidth / this.fontSize);
                this.drops = Array(this.columns).fill(0).map(() => Math.random() * -100);
            }

            init() {
                this.ctx.fillStyle = "#000";
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
            }

            animate() {
                this.ctx.fillStyle = this.mode === "green" ? "rgba(0, 0, 0, 0.05)" : "rgba(0, 0, 0, 0.05)";
                this.ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
                const color = this.mode === "green" ? "#00ff00" : "#ff0000";
                this.ctx.fillStyle = color;
                this.ctx.font = `${this.fontSize}px 'Orbitron', monospace`;
                for (let i = 0; i < this.drops.length; i++) {
                    const char = this.characters[Math.floor(Math.random() * this.characters.length)];
                    const x = i * this.fontSize;
                    const y = this.drops[i] * this.fontSize;
                    this.ctx.fillText(char, x, y);
                    if (y > window.innerHeight && Math.random() > 0.975) {
                        this.drops[i] = 0;
                    }
                    this.drops[i]++;
                }
                requestAnimationFrame(() => this.animate());
            }

            setMode(mode) {
                this.mode = mode;
            }
        }

        // Initialize Matrix Rain
        const matrix = new MatrixRain();

        // Hacker Responses
        const hackerResponses = {
            greetings: [
                "Hello, fellow hacker. Welcome to the matrix.",
                "Greetings, cyber warrior. Ready to hack the system?",
                "Hey there, digital ghost. What's your mission today?",
                "Welcome to the underground, hacker. What brings you here?",
                "Salutations, code breaker. The system awaits your command.",
            ],
              help: `
AVAILABLE COMMANDS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• help / ? - Show this help menu
• hi / hello - Greet the system
• status - Check system status
• scan - Perform network scan
• hack - Initiate hacking sequence
• info - System information
• time - Current system time
• joke - Get a hacker joke
• quote - Random hacker quote
• quiz - Start knowledge assessment system
• save_quiz - Manually save quiz results to database
• malabart doc - Access Malabart document recorded
• list files - Check uploaded files
• organize files - Organize files by user in Google Drive
• [AD NO] - Lookup student details (960, 986-1021)
• [AD NO] pic - Show student photo (960, 986-1021)
• 📎 ATTACH - Upload files (click attach button)
• clear - Clear terminal
• exit - Exit command interface
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📎 FILE UPLOAD: Click ATTACH button to upload any file
   - Files converted to base64 and stored in database
   - Maximum file size: 100MB
   - All file types supported
   - Admin can download files from database
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`,

            status: [
                "SYSTEM STATUS: ONLINE\nFIREWALL: BYPASSED\nSECURITY: COMPROMISED\nACCESS LEVEL: ROOT",
                "NETWORK STATUS: CONNECTED\nENCRYPTION: CRACKED\nSURVEILLANCE: DISABLED\nSTEALTH MODE: ACTIVE",
                "SYSTEM ANALYSIS: COMPLETE\nVULNERABILITIES: 47 FOUND\nBACKDOORS: 12 INSTALLED\nMISSION: IN PROGRESS",
            ],
            scan: [
                "SCANNING NETWORK...\n192.168.1.1 - ROUTER [VULNERABLE]\n192.168.1.100 - TARGET [SECURED]\n192.168.1.250 - HONEYPOT [DETECTED]\nSCAN COMPLETE: 3 DEVICES FOUND",
                "PORT SCANNING INITIATED...\nPORT 22: SSH [OPEN]\nPORT 80: HTTP [OPEN]\nPORT 443: HTTPS [FILTERED]\nPORT 3389: RDP [CLOSED]\nSCAN RESULTS: 2 VULNERABLE PORTS",
                "VULNERABILITY SCAN RUNNING...\nSQL INJECTION: POSSIBLE\nXSS DETECTED: HIGH RISK\nBUFFER OVERFLOW: CRITICAL\nRECOMMENDED ACTION: EXPLOIT IMMEDIATELY",
            ],
            hack: [
                "INITIATING HACK SEQUENCE...\n[░░░░░░░░░░░░░░░░░░░░░░░█████████████████████] 100%\nACCESS GRANTED: SYSTEM COMPROMISED\nROOT PRIVILEGES: OBTAINED\nHACK SUCCESSFUL!",
                "LAUNCHING CYBER ATTACK...\n[████████░░] 80%\nBYPASSING SECURITY...\n[██████████] 100%\nTARGET BREACHED: MISSION ACCOMPLISHED",
                "EXECUTING EXPLOIT...\n[███░░░░░░░] 30%\nCRACKING PASSWORDS...\n[████████░░] 80%\nSYSTEM HACKED: FULL CONTROL ACHIEVED",
            ],
            info: `
SYSTEM INFORMATION:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
OS: LINUX KALI 2024.1 (HACKER EDITION)
KERNEL: 6.8.11-amd64
CPU: INTEL i9-14900K @ 5.8GHz
RAM: 64GB DDR5-6000
GPU: NVIDIA RTX 4090 (CRYPTO MINING DISABLED)
TOOLS: METASPLOIT, NMAP, WIRESHARK, BURP SUITE
STATUS: FULLY OPERATIONAL
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`,
            jokes: [
                "Why do hackers prefer dark mode?\nBecause light attracts bugs!",
                "How many hackers does it take to change a light bulb?\nNone, they just exploit the darkness.",
                "What's a hacker's favorite type of music?\nRAP... (Remote Access Protocol)",
                "Why don't hackers ever get lost?\nBecause they always find the backdoor!",
                "What do you call a hacker who's also a musician?\nA bandwidth!",
            ],
            quotes: [
                '"The best way to get information is to not ask for it." - Anonymous',
                '"Security is not a product, but a process." - Bruce Schneier',
                "\"In the world of hacking, today's security is tomorrow's vulnerability.\" - Unknown",
                '"Privacy is not about hiding something. It\'s about protecting everything." - Anonymous',
                '"The only truly secure system is one that is powered off." - Gene Spafford',
            ],
            unknown: [
                "TYPE 'help' FOR AVAILABLE COMMANDS.",
                "QUAF ADMIN WILL CONTACT YOU WHEN ONLINE",
                "QUAF ADMIN WILL CONTACT YOU TO YOUR GMAIL",
                "TYPE YOUR ALL DOUBTS NOW. ADMIN WILL REPLY TO YOU LATER",
                "CONTINUE. TYPE YOUR ALL NEEDS",
            ],
        };

        // Quiz Functions
        function startQuiz() {
            document.getElementById('commandInterface').classList.add('hidden');
            document.getElementById('quizContainer').classList.remove('hidden');
            generateSubjectButtons();
            updateQuizProgress();
        }

        function generateSubjectButtons() {
            const subjectsGrid = document.getElementById('subjectsGrid');
            subjectsGrid.innerHTML = '';
            
            for (let i = 1; i <= 16; i++) {
                const button = document.createElement('button');
                button.className = 'subject-btn';
                button.textContent = subjectNames[i.toString()];
                
                if (quizSession.completedSubjects[i.toString()]) {
                    button.classList.add('completed');
                    button.innerHTML += `<br><small>Score: ${quizSession.completedSubjects[i.toString()]}/20</small>`;
                } else if (!subjectQuestions[i.toString()]) {
                    button.classList.add('disabled');
                    button.innerHTML += `<br><small>Coming Soon</small>`;
                } else {
                    button.onclick = () => startSubjectQuiz(i.toString());
                }
                
                subjectsGrid.appendChild(button);
            }
        }

        function startSubjectQuiz(subjectId) {
            if (quizSession.completedSubjects[subjectId] || !subjectQuestions[subjectId]) {
                return;
            }
            
            quizSession.currentSubject = subjectId;
            quizSession.currentQuestion = 0;
            quizSession.currentScore = 0;
            
            document.getElementById('subjectSelection').classList.add('hidden');
            document.getElementById('questionInterface').classList.remove('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            const subject = quizSession.currentSubject;
            const questionNum = quizSession.currentQuestion;
            const questions = subjectQuestions[subject];
            
            if (questionNum >= questions.length) {
                completeSubject();
                return;
            }
            
            const question = questions[questionNum];
            
            document.getElementById('questionHeader').textContent = `${subjectNames[subject]} - QUESTION ${questionNum + 1} OF ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = questionNum + 1;
            document.getElementById('currentScore').textContent = quizSession.currentScore;
            
            const progress = ((questionNum + 1) / questions.length) * 100;
            document.getElementById('questionProgress').style.width = progress + '%';
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.onclick = () => selectOption(index, question.correctAnswer);
                optionsContainer.appendChild(button);
            });
        }

        function selectOption(selectedIndex, correctIndex) {
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (selectedIndex === correctIndex) {
                options[selectedIndex].classList.add('correct');
                quizSession.currentScore++;
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[correctIndex].classList.add('correct');
            }
            
            setTimeout(() => {
                quizSession.currentQuestion++;
                loadQuestion();
            }, 2000);
        }

         function completeSubject() {
    const subject = quizSession.currentSubject;
    const score = quizSession.currentScore;
    
    quizSession.completedSubjects[subject] = score;
    quizSession.totalScore += score;
    quizSession.allResults[subject] = {
        name: subjectNames[subject],
        score: score,
        total: 20
    };
    
    document.getElementById('questionInterface').classList.add('hidden');
    document.getElementById('subjectSelection').classList.remove('hidden');
    
    generateSubjectButtons();
    updateQuizProgress();
    
    // Show completion message for this subject
    const output = document.getElementById("commandOutput");
    const timestamp = new Date().toLocaleTimeString();
    if (output) {
        output.innerHTML += `\n[${timestamp}] SUBJECT COMPLETED: ${subjectNames[subject]} - Score: ${score}/20\n`;
        const terminal = document.getElementById("terminal");
        if (terminal) {
            terminal.scrollTop = terminal.scrollHeight;
        }
    }
    
    // Check if ALL 16 subjects are completed (not just available ones)
    const totalSubjects = 16;
    const completedCount = Object.keys(quizSession.completedSubjects).length;
    
    if (completedCount === totalSubjects) {
        setTimeout(() => showResults(), 1000);
    }
}

         function updateQuizProgress() {
            const completed = Object.keys(quizSession.completedSubjects).length;
            const total = 16; // All 16 subjects available
            
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('totalScore').textContent = quizSession.totalScore;
            
            const progress = (completed / total) * 100;
            document.getElementById('overallProgress').style.width = progress + '%';
        }

         function showResults() {
            document.getElementById('subjectSelection').classList.add('hidden');
            document.getElementById('resultsInterface').classList.remove('hidden');
            
            const totalPossible = Object.keys(quizSession.completedSubjects).length * 20;
            const accuracy = Math.round((quizSession.totalScore / totalPossible) * 100);
            
            document.getElementById('finalTotalScore').textContent = quizSession.totalScore;
            document.getElementById('finalAccuracy').textContent = accuracy;
            
            createResultsChart();
            
            // Automatically send results to Google Sheets
            sendQuizResults();
        }

        function createResultsChart() {
    const canvas = document.getElementById('resultsChart');
    if (!canvas) return;
    
    // Destroy existing chart if it exists
    if (window.quizChart) {
        window.quizChart.destroy();
    }
    
    const ctx = canvas.getContext('2d');
    
    const labels = Object.values(quizSession.allResults).map(result => result.name);
    const scores = Object.values(quizSession.allResults).map(result => result.score);
    const maxScores = Object.values(quizSession.allResults).map(result => result.total);
    
    // Create the chart and store reference globally
    window.quizChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Your Score',
                data: scores,
                backgroundColor: 'rgba(0, 255, 0, 0.8)',
                borderColor: 'rgba(0, 255, 0, 1)',
                borderWidth: 2
            }, {
                label: 'Max Score',
                data: maxScores,
                backgroundColor: 'rgba(0, 100, 0, 0.3)',
                borderColor: 'rgba(0, 100, 0, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#00ff00',
                        font: {
                            family: 'Orbitron',
                            size: 12
                        }
                    }
                },
                title: {
                    display: true,
                    text: 'Quiz Results by Subject',
                    color: '#00ff00',
                    font: {
                        family: 'Orbitron',
                        size: 16
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    max: 20,
                    ticks: {
                        color: '#00ff00',
                        font: {
                            family: 'Orbitron',
                            size: 10
                        },
                        stepSize: 2
                    },
                    grid: {
                        color: 'rgba(0, 255, 0, 0.2)'
                    },
                    title: {
                        display: true,
                        text: 'Score',
                        color: '#00ff00',
                        font: {
                            family: 'Orbitron'
                        }
                    }
                },
                x: {
                    ticks: {
                        color: '#00ff00',
                        font: {
                            family: 'Orbitron',
                            size: 8
                        },
                        maxRotation: 45
                    },
                    grid: {
                        color: 'rgba(0, 255, 0, 0.2)'
                    },
                    title: {
                        display: true,
                        text: 'Subjects',
                        color: '#00ff00',
                        font: {
                            family: 'Orbitron'
                        }
                    }
                }
            },
            animation: {
                duration: 2000,
                easing: 'easeInOutQuart'
            }
        }
    });
}

        // Add this function for testing
function forceShowResults() {
    if (Object.keys(quizSession.completedSubjects).length === 0) {
        alert("Complete at least one subject first!");
        return;
    }
    showResults();
}

        function restartQuiz() {
            quizSession.completedSubjects = {};
            quizSession.totalScore = 0;
            quizSession.allResults = {};
            
            document.getElementById('resultsInterface').classList.add('hidden');
            document.getElementById('subjectSelection').classList.remove('hidden');
            
            generateSubjectButtons();
            updateQuizProgress();
        }

        async function exitQuiz() {
    // Send partial results as a message if user has completed any subjects
    if (Object.keys(quizSession.completedSubjects).length > 0) {
        const completedSubjects = Object.keys(quizSession.completedSubjects);
        const totalCompleted = completedSubjects.length;
        const totalPossible = totalCompleted * 20;
        const accuracy = totalPossible > 0 ? Math.round((quizSession.totalScore / totalPossible) * 100) : 0;
        
        // Create detailed message about completed subjects
        let resultsMessage = `🎯 PARTIAL QUIZ EXIT RESULTS:\n`;
        resultsMessage += `✅ Completed Subjects: ${totalCompleted}/16\n`;
        resultsMessage += `📊 Total Score: ${quizSession.totalScore}/${totalPossible}\n`;
        resultsMessage += `🎯 Accuracy: ${accuracy}%\n\n`;
        resultsMessage += `📋 Subject-wise Results:\n`;
        
        for (const subjectId of completedSubjects) {
            const score = quizSession.completedSubjects[subjectId];
            resultsMessage += `• ${subjectNames[subjectId]}: ${score}/20 (${Math.round((score/20)*100)}%)\n`;
        }
        
        resultsMessage += `\n⚠️ Quiz exited before completion - Partial results saved`;
        
        // Send as regular message using existing function
        await sendMessageToSheet(resultsMessage);
    }
    
    document.getElementById('quizContainer').classList.add('hidden');
    document.getElementById('commandInterface').classList.remove('hidden');
    
    const output = document.getElementById("commandOutput");
    const timestamp = new Date().toLocaleTimeString();
    
    if (Object.keys(quizSession.completedSubjects).length > 0) {
        output.innerHTML += `\n[${timestamp}] QUIZ SYSTEM EXITED. PARTIAL RESULTS SAVED TO DATABASE. WHAT YOU NEED NOW?\n`;
    } else {
        output.innerHTML += `\n[${timestamp}] QUIZ SYSTEM EXITED. NO SUBJECTS COMPLETED. WHAT YOU NEED NOW?\n`;
    }
    
    const terminal = document.getElementById("terminal");
    terminal.scrollTop = terminal.scrollHeight;
}

// Messaging Functions
function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function validatePhoneNumber(phone) {
    // Basic validation for international phone numbers
    const phoneRegex = /^\+[1-9]\d{1,14}$/;
    return phoneRegex.test(phone);
}

function openGmail(emails) {
    const emailList = emails.split(',').map(email => email.trim()).join(',');
    const subject = encodeURIComponent("Message from EHC");
    const body = encodeURIComponent(`Hello,

[🟢 Welcome, Cyber Defender!

You’re officially invited to join EHC (Ethical Hacking Collective) — a high-trust group of ethical hackers, cybersecurity enthusiasts, and digital warriors. If you believe in hacking to protect, not to exploit — this space is for you.

🔍 Why Join EHC?
💾 Hands-on workshops (Metasploit, Nmap, Burp Suite, and more)
🧠 Weekly challenges & Capture the Flag (CTF) contests
🛡️ Peer learning + Pro mentorship
🚨 Instant updates on zero-days, patches, and threat intel
🌐 Community-led cyber missions & project opportunities

🔗 Join us now: [https://quafai.vercel.app/]
📧 Contact: ethical.hacker.cop@gmail.com

Step into the code. Be the firewall.
We are EHC – Hack to Secure.]

Best Of Luck,
ETHICAL HACKER COP`);
    
    const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=${emailList}&su=${subject}&body=${body}`;
    window.open(gmailUrl, '_blank');
}

function openWhatsApp(phoneNumber) {
    const message = encodeURIComponent(`Hello!

[🟢 Welcome, Cyber Defender!

You’re officially invited to join EHC (Ethical Hacking Collective) — a high-trust group of ethical hackers, cybersecurity enthusiasts, and digital warriors. If you believe in hacking to protect, not to exploit — this space is for you.

🔍 Why Join EHC?
💾 Hands-on workshops (Metasploit, Nmap, Burp Suite, and more)
🧠 Weekly challenges & Capture the Flag (CTF) contests
🛡️ Peer learning + Pro mentorship
🚨 Instant updates on zero-days, patches, and threat intel
🌐 Community-led cyber missions & project opportunities

🔗 Join us now: [https://quafai.vercel.app/]
📧 Contact: ethical.hacker.cop@gmail.com

Step into the code. Be the firewall.
We are EHC – Hack to Secure.]

Best Of Luck,
ETHICAL HACKER COP`);
    
    const whatsappUrl = `https://wa.me/${phoneNumber.replace('+', '')}?text=${message}`;
    window.open(whatsappUrl, '_blank');
}

function openTelegram(phoneNumber) {
    const message = encodeURIComponent(`Hello!

[🟢 Welcome, Cyber Defender!

You’re officially invited to join EHC (Ethical Hacking Collective) — a high-trust group of ethical hackers, cybersecurity enthusiasts, and digital warriors. If you believe in hacking to protect, not to exploit — this space is for you.

🔍 Why Join EHC?
💾 Hands-on workshops (Metasploit, Nmap, Burp Suite, and more)
🧠 Weekly challenges & Capture the Flag (CTF) contests
🛡️ Peer learning + Pro mentorship
🚨 Instant updates on zero-days, patches, and threat intel
🌐 Community-led cyber missions & project opportunities

🔗 Join us now: [https://quafai.vercel.app/]
📧 Contact: ethical.hacker.cop@gmail.com

Step into the code. Be the firewall.
We are EHC – Hack to Secure.]

Best Of Luck,
ETHICAL HACKER COP`);
    
    const telegramUrl = `https://t.me/${phoneNumber.replace('+', '')}?text=${message}`;
    window.open(telegramUrl, '_blank');
}

// Add these functions before the processCommand function
function isPicRequest(cmd) {
    const parts = cmd.split(' ');
    if (parts.length !== 2 || parts[1] !== 'pic') {
        return false;
    }
    return isValidStudentId(parts[0]);
}

function extractStudentIdFromPicCommand(cmd) {
    const parts = cmd.split(' ');
    return parts[0];
}

function openGmailOfficial(emails) {
    const emailList = emails.split(',').map(email => email.trim()).join(',');
    const subject = encodeURIComponent("🔥 EXCLUSIVE INVITATION: Join Elite Ethical Hacking Academy 🔥");
    
    const officialBody = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 0; 
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
            color: #ffffff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 255, 0, 0.3);
            border: 2px solid #00ff00;
        }
        .header {
            background: linear-gradient(45deg, #00ff00, #00cc00, #009900);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="matrix" patternUnits="userSpaceOnUse" width="10" height="10"><rect width="10" height="10" fill="rgba(0,0,0,0.1)"/><text x="5" y="8" font-family="monospace" font-size="8" fill="rgba(0,255,0,0.3)" text-anchor="middle">1</text></pattern></defs><rect width="100" height="100" fill="url(%23matrix)"/></svg>');
            opacity: 0.2;
        }
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            color: #000000;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            z-index: 1;
        }
        .header .subtitle {
            font-size: 1.2em;
            color: #003300;
            margin-top: 10px;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }
        .content {
            padding: 40px;
            background: radial-gradient(circle at center, #1a1a2e, #0f0f23);
            position: relative;
        }
        .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 98px,
                rgba(0, 255, 0, 0.03) 100px
            );
        }
        .welcome-text {
            font-size: 1.3em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #00ff00;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        .feature-card {
            background: linear-gradient(135deg, #2a2a3e, #1a1a2e);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #00ff00;
            box-shadow: 0 10px 20px rgba(0, 255, 0, 0.2);
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 255, 0, 0.3);
        }
        .feature-card h3 {
            color: #00ff00;
            font-size: 1.4em;
            margin-bottom: 15px;
            text-align: center;
        }
        .feature-card p {
            color: #cccccc;
            line-height: 1.5;
            text-align: center;
        }
        .cta-section {
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #003300, #006600);
            border-radius: 15px;
            border: 2px solid #00ff00;
        }
        .cta-button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #00ff00, #00cc00);
            color: #000000;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.2em;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
            transition: all 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 0, 0.6);
        }
        .footer {
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
            padding: 20px;
            text-align: center;
            border-top: 2px solid #00ff00;
        }
        .footer p {
            margin: 5px 0;
            color: #888888;
        }
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 255, 0, 0.03) 2px,
                rgba(0, 255, 0, 0.03) 4px
            );
            pointer-events: none;
            z-index: -1;
        }
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px rgba(0, 255, 0, 0.5); }
            to { text-shadow: 0 0 20px rgba(0, 255, 0, 0.8), 0 0 30px rgba(0, 255, 0, 0.6); }
        }
    </style>
</head>
<body>
    <div class="matrix-bg"></div>
    <div class="container">
        <div class="header">
            <h1 class="glow">🔐 ELITE HACKING ACADEMY 🔐</h1>
            <div class="subtitle">EXCLUSIVE INVITATION TO JOIN OUR ETHICAL HACKING COMMUNITY</div>
        </div>
        
        <div class="content">
            <div class="welcome-text">
                <strong>Greetings, Future Cyber Warrior!</strong><br>
                You have been personally selected to join our exclusive Ethical Hacking Academy. 
                This is your gateway to mastering the art of cybersecurity and ethical hacking.
            </div>
            
            <div class="features">
                <div class="feature-card">
                    <h3>🎯 Advanced Penetration Testing</h3>
                    <p>Learn cutting-edge techniques for identifying and exploiting vulnerabilities in systems and networks.</p>
                </div>
                <div class="feature-card">
                    <h3>🛡️ Cybersecurity Mastery</h3>
                    <p>Master the defensive side of cybersecurity with hands-on experience in protecting digital assets.</p>
                </div>
                <div class="feature-card">
                    <h3>🔍 Digital Forensics</h3>
                    <p>Discover the secrets of digital investigation and evidence collection in cybercrime cases.</p>
                </div>
                <div class="feature-card">
                    <h3>⚡ Real-World Scenarios</h3>
                    <p>Practice on live systems and participate in capture-the-flag competitions with global hackers.</p>
                </div>
            </div>
            
            <div class="cta-section">
                <h2 style="color: #00ff00; margin-bottom: 20px;">Ready to Begin Your Journey?</h2>
                <p style="color: #cccccc; margin-bottom: 20px;">Join thousands of ethical hackers who have transformed their careers with our academy.</p>
                <a href="https://quaf.netlify.app" class="cta-button">🚀 ACCESS ACADEMY NOW 🚀</a>
            </div>
            
            <div style="background: linear-gradient(135deg, #1a1a2e, #2a2a3e); padding: 25px; border-radius: 15px; border: 1px solid #00ff00; margin-top: 30px;">
                <h3 style="color: #00ff00; text-align: center; margin-bottom: 20px;">🎓 What You'll Master:</h3>
                <ul style="color: #cccccc; columns: 2; column-gap: 30px; list-style: none; padding: 0;">
                    <li style="margin-bottom: 10px;">✅ Advanced Linux Systems</li>
                    <li style="margin-bottom: 10px;">✅ Network Security Analysis</li>
                    <li style="margin-bottom: 10px;">✅ Web Application Testing</li>
                    <li style="margin-bottom: 10px;">✅ Malware Analysis</li>
                    <li style="margin-bottom: 10px;">✅ Social Engineering Defense</li>
                    <li style="margin-bottom: 10px;">✅ Cryptography & Encryption</li>
                    <li style="margin-bottom: 10px;">✅ Mobile Security Testing</li>
                    <li style="margin-bottom: 10px;">✅ Cloud Security Auditing</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>🔥 ELITE ETHICAL HACKING ACADEMY 🔥</strong></p>
            <p>Building the next generation of cybersecurity professionals</p>
            <p style="font-size: 0.9em; color: #666666;">This invitation is confidential and intended for authorized recipients only.</p>
        </div>
    </div>
</body>
</html>`;

    const body = encodeURIComponent(officialBody);
    const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=${emailList}&su=${subject}&body=${body}`;
    window.open(gmailUrl, '_blank');
}

        // Process Command
async function processCommand(command) {
    const cmd = command.toLowerCase().trim();
    const output = document.getElementById("commandOutput");
    const timestamp = new Date().toLocaleTimeString();
    let response = "";

    commandHistory.push(command);
    userSession.messages.push({
        message: command,
        timestamp: new Date().toLocaleString()
    });

    output.innerHTML += `\n[${timestamp}] HACKER@TERMINAL:~$ ${command}\n`;

    if (!userSession.firstCommand) {
        userSession.firstCommand = true;
        response = "WHAT IS YOUR NAME?";
        userSession.nameAsked = true;
    } else if (userSession.nameAsked && !userSession.userName) {
        userSession.userName = command.trim();
        userSession.nameAsked = false;
        userSession.emailAsked = true;
        response = "TYPE YOUR GMAIL...";
    } else if (userSession.emailAsked && !userSession.userEmail) {
        const email = command.trim();
        if (isValidEmail(email) && email.toLowerCase().includes('gmail')) {
            userSession.userEmail = email;
            userSession.emailAsked = false;
            const success = await sendToGoogleSheets(userSession.userName, userSession.userEmail);
            userSession.dataSubmitted = success;
            response = success ? "THANK YOU.. WHAT YOU NEED NOW.." : "<span class='error-text'>FAILED TO REGISTER. PLEASE TRY AGAIN.</span>";
        } else {
            response = '<span class="error-text">THIS GMAIL NOT AVAILABLE.. PLEASE TRY AGAIN</span>';
        }
    } else if (userSession.dataSubmitted) {
        // Handle messaging modes if active
        if (userSession.messagingMode) {
            if (userSession.messagingStep === 1) {
                // Asking for contacts
                if (userSession.messagingMode === 'gmail' || userSession.messagingMode === 'gmail_official') {
                    const emails = command.trim();
                    const emailList = emails.split(',').map(e => e.trim());
                    const validEmails = emailList.every(validateEmail);
                    if (validEmails) {
                        userSession.messagingContact = emails;
                        userSession.messagingStep = 2;
                        if (userSession.messagingMode === 'gmail_official') {
                            response = `🔥 OFFICIAL INVITATION RECIPIENTS CONFIRMED 🔥\nRECIPIENTS: ${emails}\nTYPE 'ok' TO SEND PROFESSIONAL INVITATION OR 'cancel' TO ABORT`;
                        } else {
                            response = `GMAIL RECIPIENTS CONFIRMED: ${emails}\nTYPE 'ok' TO SEND EMAIL OR 'cancel' TO ABORT`;
                        }
                    } else {
                        response = '<span class="error-text">INVALID EMAIL FORMAT. PLEASE ENTER VALID EMAIL ADDRESSES SEPARATED BY COMMAS</span>';
                    }
                } else if (userSession.messagingMode === 'whatsapp' || userSession.messagingMode === 'telegram') {
                    const phone = command.trim();
                    if (validatePhoneNumber(phone)) {
                        userSession.messagingContact = phone;
                        userSession.messagingStep = 2;
                        response = `PHONE NUMBER CONFIRMED: ${phone}\nTYPE 'ok' TO PROCEED OR 'cancel' TO ABORT`;
                    } else {
                        response = '<span class="error-text">INVALID PHONE NUMBER. PLEASE ENTER WITH COUNTRY CODE (e.g., +1234567890)</span>';
                    }
                }
            } else if (userSession.messagingStep === 2) {
                if (cmd === 'ok') {
                    if (userSession.messagingMode === 'gmail') {
                        openGmail(userSession.messagingContact);
                        response = `GMAIL COMPOSER OPENED FOR: ${userSession.messagingContact}`;
                    } else if (userSession.messagingMode === 'gmail_official') {
                        openGmailOfficial(userSession.messagingContact);
                        response = `🔥 OFFICIAL INVITATION SENT TO: ${userSession.messagingContact} 🔥\nPROFESSIONAL GMAIL COMPOSER OPENED WITH ELITE HACKING ACADEMY INVITATION`;
                    } else if (userSession.messagingMode === 'whatsapp') {
                        openWhatsApp(userSession.messagingContact);
                        response = `WHATSAPP OPENED FOR: ${userSession.messagingContact}`;
                    } else if (userSession.messagingMode === 'telegram') {
                        openTelegram(userSession.messagingContact);
                        response = `TELEGRAM OPENED FOR: ${userSession.messagingContact}`;
                    }
                    // Reset messaging state after sending
                    userSession.messagingMode = null;
                    userSession.messagingStep = 0;
                    userSession.messagingContact = '';
                } else if (cmd === 'cancel') {
                    response = "MESSAGING CANCELLED. WHAT YOU NEED NOW?";
                    userSession.messagingMode = null;
                    userSession.messagingStep = 0;
                    userSession.messagingContact = '';
                } else {
                    response = "TYPE 'ok' TO CONFIRM OR 'cancel' TO ABORT";
                }
            }
        } else {
            // Regular command processing
            sendMessageToSheet(command);

            if (cmd === "send gmail") {
                userSession.messagingMode = 'gmail';
                userSession.messagingStep = 1;
                response = "ENTER GMAIL ADDRESS(ES) - MULTIPLE ADDRESSES SEPARATED BY COMMAS:";
            } else if (cmd === "send gmail official" || cmd === "gmail official") {
    userSession.messagingMode = 'gmail_official';
    userSession.messagingStep = 1;
    response = "🔥 OFFICIAL INVITATION MODE ACTIVATED 🔥\nENTER GMAIL ADDRESS(ES) - MULTIPLE ADDRESSES SEPARATED BY COMMAS:";        
            } else if (cmd === "send whatsapp") {
                userSession.messagingMode = 'whatsapp';
                userSession.messagingStep = 1;
                response = "ENTER PHONE NUMBER WITH COUNTRY CODE (e.g., +1234567890):";
            } else if (cmd === "send telegram") {
                userSession.messagingMode = 'telegram';
                userSession.messagingStep = 1;
                response = "ENTER PHONE NUMBER WITH COUNTRY CODE (e.g., +1234567890):";
            } else if (cmd === "quiz") {
                startQuiz();
                return;
            } else if (cmd === "help" || cmd === "?") {
                response = hackerResponses.help;
            } else if (cmd === "hi" || cmd === "hello") {
                response = hackerResponses.greetings[Math.floor(Math.random() * hackerResponses.greetings.length)];
            } else if (cmd === "status") {
                response = hackerResponses.status[Math.floor(Math.random() * hackerResponses.status.length)];
            } else if (cmd === "scan") {
                response = hackerResponses.scan[Math.floor(Math.random() * hackerResponses.scan.length)];
            } else if (cmd === "hack") {
                response = hackerResponses.hack[Math.floor(Math.random() * hackerResponses.hack.length)];
            } else if (cmd === "info") {
                response = hackerResponses.info;
            } else if (cmd === "time") {
                response = `CURRENT SYSTEM TIME: ${new Date().toLocaleString()}\nUTC TIME: ${new Date().toUTCString()}\nUNIX TIMESTAMP: ${Math.floor(Date.now() / 1000)}`;
            } else if (cmd === "joke") {
                response = hackerResponses.jokes[Math.floor(Math.random() * hackerResponses.jokes.length)];
            } else if (cmd === "quote") {
                response = hackerResponses.quotes[Math.floor(Math.random() * hackerResponses.quotes.length)];
            } else if (cmd === "clear") {
                document.getElementById("commandOutput").innerHTML = `SYSTEM INITIALIZED...\nWELCOME TO THE HACKER TERMINAL\nTYPE 'help' FOR AVAILABLE COMMANDS\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
                return;        
            } else if (cmd === "save_quiz" || cmd === "save quiz") {
                if (Object.keys(quizSession.completedSubjects).length > 0) {
                    const success = await sendQuizResults();
                    if (success) {
                        response = "QUIZ RESULTS SAVED TO DATABASE SUCCESSFULLY!";
                    } else {
                        response = "ERROR: FAILED TO SAVE QUIZ RESULTS. PLEASE TRY AGAIN.";
                    }
                } else {
                    response = "NO QUIZ RESULTS TO SAVE. COMPLETE AT LEAST ONE SUBJECT FIRST.";
                }
                } else if (cmd === "malabart doc") {
    const pdfUrl = "https://quaf.netlify.app/fest/doc.pdf";
    response = displayPDF(pdfUrl);
                } else if (cmd === "list files") {
    response = "CHECKING YOUR UPLOADED FILES...";
    // You could fetch and display file list here
                } else if (cmd === "organize files") {
    response = "ORGANIZING FILES BY USER... CHECK YOUR GOOGLE DRIVE";    
                 } else if (isPicRequest(cmd)) {
    const studentId = extractStudentIdFromPicCommand(cmd);
    const imageUrl = `https://quaf.netlify.app/pic/pic/${studentId}.${studentId === '960' ? 'png' : 'jpg'}`;
    
    response = `FETCHING STUDENT PHOTO... PLEASE WAIT...\n\n`;
    response += `STUDENT ID: ${studentId}\n`;
    response += `PHOTO URL: ${imageUrl}\n\n`;
    response += `<img src="${imageUrl}" alt="Student ${studentId}" style="max-width: 250px; max-height: 350px; border: 2px solid #00ff00; border-radius: 10px; display: block; margin: 10px 0;" onerror="this.style.display='none'; this.nextSibling.style.display='block';">`;
    response += `<div style="display: none; color: #ff0000; font-weight: bold;">❌ PHOTO NOT FOUND OR FAILED TO LOAD</div>`;
} else if (isValidStudentId(cmd)) {
    response = "FETCHING STUDENT DATA... PLEASE WAIT...";
    output.innerHTML += `${response}\n`;
    const terminal = document.getElementById("terminal");
    terminal.scrollTop = terminal.scrollHeight;
    
    const studentData = await fetchStudentData();
    if (studentData && studentData[cmd]) {
        response = formatStudentDetails(studentData[cmd]);
    } else if (studentData) {
        response = `STUDENT WITH AD NO ${cmd} NOT FOUND IN DATABASE.`;
    } else {
        response = '<span class="error-text">ERROR: UNABLE TO FETCH STUDENT DATABASE. PLEASE TRY AGAIN LATER.</span>';
    }

            } else if (cmd === "exit") {
                exitCommandInterface();
                return;
            } else {
                response = hackerResponses.unknown[Math.floor(Math.random() * hackerResponses.unknown.length)];
            }
        }
    } else {
        response = "PLEASE COMPLETE THE REGISTRATION PROCESS FIRST.";
    }

    if (response) {
        output.innerHTML += `${response}\n`;
    }

    const terminal = document.getElementById("terminal");
    terminal.scrollTop = terminal.scrollHeight;
}


        // Start Game Function
        function startGame() {
            initAudio();
            gameStarted = true;
            
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }
            
            document.getElementById("startScreen").classList.add("hidden");
            document.getElementById("securityPanel").classList.remove("hidden");
            document.getElementById("pinInput").focus();
        }

        // Check PIN Function
        function checkPin() {
            const pin = document.getElementById("pinInput").value;
            const correctPin = "quaf@dhdc";
            
            if (pin === correctPin) {
                document.getElementById("securityPanel").classList.add("hidden");
                document.getElementById("commandInterface").classList.remove("hidden");
                document.getElementById("commandInput").focus();
                document.getElementById("pinInput").value = "";
                document.getElementById("warningMessage").classList.add("hidden");
                matrix.setMode("green");
            } else {
                triggerAlert();
            }
        }

        function exitCommandInterface() {
    document.getElementById("commandInterface").classList.add("hidden");
    
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
    }
    
    document.getElementById("startScreen").classList.remove("hidden");
    gameStarted = false;
    
    userSession = {
        firstCommand: false,
        nameAsked: false,
        emailAsked: false,
        userName: '',
        userEmail: '',
        dataSubmitted: false,
        messages: [],
        // Reset messaging state
        messagingMode: null,
        messagingStep: 0,
        messagingContact: ''
    };
    
    quizSession = {
        currentSubject: null,
        currentQuestion: 0,
        currentScore: 0,
        completedSubjects: {},
        totalScore: 0,
        allResults: {}
    };
    
    document.getElementById("commandOutput").innerHTML = `SYSTEM INITIALIZED...\nWELCOME TO THE HACKER TERMINAL\nPLEASE ENTER YOUR FIRST COMMAND TO BEGIN...\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
}


        // Trigger Alert System
        function triggerAlert() {
            document.getElementById("warningMessage").classList.remove("hidden");
            matrix.setMode("red");
            
            let alertCount = 0;
            const alertInterval = setInterval(() => {
                playAlertSound(500);
                alertCount++;
                if (alertCount >= 20) {
                    clearInterval(alertInterval);
                    matrix.setMode("green");
                    document.getElementById("warningMessage").classList.add("hidden");
                }
            }, 500);
            
            document.getElementById("pinInput").value = "";
        }

        // Enhanced keyboard restrictions
        document.addEventListener("keydown", function (e) {
            if (e.ctrlKey || e.altKey || e.metaKey || e.keyCode === 9) {
                if (document.getElementById("commandInterface").classList.contains("hidden") || 
                    (document.activeElement !== document.getElementById("commandInput") && 
                     document.activeElement !== document.getElementById("pinInput"))) {
                    e.preventDefault();
                    if (gameStarted) {
                        triggerAlert();
                    }
                    return false;
                }
                
                if (!(e.ctrlKey && (e.keyCode === 86 || e.keyCode === 67 || e.keyCode === 88))) {
                    e.preventDefault();
                    if (gameStarted) {
                        triggerAlert();
                    }
                    return false;
                }
            }
            
            if (e.keyCode >= 112 && e.keyCode <= 123) {
                e.preventDefault();
                if (gameStarted) {
                    triggerAlert();
                }
                return false;
            }
            
            if (e.keyCode === 27 || e.keyCode === 91 || e.keyCode === 93 || e.keyCode === 44 || e.keyCode === 145) {
                e.preventDefault();
                if (gameStarted) {
                    triggerAlert();
                }
                return false;
            }
            
            if (e.keyCode === 13) {
                if (!document.getElementById("securityPanel").classList.contains("hidden")) {
                    checkPin();
                } else if (!document.getElementById("commandInterface").classList.contains("hidden")) {
                    const command = document.getElementById("commandInput").value.trim();
                    if (command) {
                        processCommand(command);
                        document.getElementById("commandInput").value = "";
                    }
                }
            }
        });

        // Disable right-click
        document.addEventListener("contextmenu", function (e) {
            e.preventDefault();
            if (gameStarted) {
                triggerAlert();
            }
        });

        // Handle fullscreen changes
        document.addEventListener("fullscreenchange", function () {
            if (!document.fullscreenElement && gameStarted && 
                document.getElementById("commandInterface").classList.contains("hidden")) {
                document.getElementById("securityPanel").classList.remove("hidden");
            }
        });

        // Prevent text selection
        document.onselectstart = function () {
            return false;
        };

        // Prevent drag and drop
        document.ondragstart = function () {
            return false;
        };

        // Prevent copy/paste in most contexts
        document.addEventListener("copy", function (e) {
            if (document.activeElement !== document.getElementById("commandInput") && 
                document.activeElement !== document.getElementById("pinInput")) {
                e.preventDefault();
                if (gameStarted) {
                    triggerAlert();
                }
            }
        });

        document.addEventListener("paste", function (e) {
            if (document.activeElement !== document.getElementById("commandInput") && 
                document.activeElement !== document.getElementById("pinInput")) {
                e.preventDefault();
                if (gameStarted) {
                    triggerAlert();
                }
            }
        });   
